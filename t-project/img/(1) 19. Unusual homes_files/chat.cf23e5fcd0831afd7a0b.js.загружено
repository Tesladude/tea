(window.webpackJsonpWidgets=window.webpackJsonpWidgets||[]).push([[7],{"+tCn":function(e,t,n){var r=n("tQYX");e.exports=function(e){return e==e&&!r(e)}},"0+aC":function(e,t,n){var r=n("pFSi");e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},"0Ss3":function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},"1EDM":function(e,t,n){var r=n("EI7Z"),o=n("CEyS"),i=n("i7nn"),a=n("Ypsa");e.exports=function(e){return i(e)?r(a(e)):o(e)}},"2srY":function(e,t,n){var r=n("w2Tz");e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},"4jPf":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"5LXd":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("1C3z"),o=n("ZSGP"),i=["input"],a=function(){function e(e){this.changeDetectorRef=e,this.skin="normal",this.checked=!1,this.disabled=!1,this.checkedChange=new r.n,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.onInputChange=function(e){e.stopPropagation(),this.checked=this.inputRef.nativeElement.checked,this.onChange(this.checked),this.onTouched(),this.checkedChange.emit(this.checked)},e.prototype.onClick=function(e){e.stopPropagation()},e.prototype.writeValue=function(e){this.checked=!!e},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e,this.changeDetectorRef.markForCheck()},e.\u0275fac=function(t){return new(t||e)(r.Sb(r.h))},e.\u0275cmp=r.Mb({type:e,selectors:[["sky-ui-switch"]],viewQuery:function(e,t){var n;1&e&&r.Pc(i,!0),2&e&&r.wc(n=r.hc())&&(t.inputRef=n.first)},inputs:{skin:"skin",checked:"checked",disabled:"disabled"},outputs:{checkedChange:"checkedChange"},features:[r.Cb([{provide:o.q,useExisting:Object(r.V)((function(){return e})),multi:!0}])],decls:6,vars:9,consts:[[3,"click"],["type","checkbox",1,"input",3,"disabled","checked","change"],["input",""],[1,"thumb-holder"],[1,"thumb-container"],[1,"thumb"]],template:function(e,t){1&e&&(r.Yb(0,"label",0),r.gc("click",(function(e){return t.onClick(e)})),r.Yb(1,"input",1,2),r.gc("change",(function(e){return t.onInputChange(e)})),r.Xb(),r.Yb(3,"div",3),r.Yb(4,"div",4),r.Tb(5,"div",5),r.Xb(),r.Xb(),r.Xb()),2&e&&(r.Hb("root -skin-",t.skin,""),r.Ib("-checked",t.checked)("-disabled",t.disabled),r.Db(1),r.pc("disabled",t.disabled)("checked",t.checked))},styles:[".root[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.root.-skin-normal[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-placeholderRgb),.32)}.root.-skin-normal[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-text-placeholder)}.root.-skin-normal[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-placeholderRgb),.48)}.root.-skin-normal[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-text-placeholder)}.root.-skin-normal[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-placeholderRgb),.32)}.root.-skin-normal[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-text-placeholder)}.root.-skin-normal.-checked[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-brand-baseRgb),.32)}.root.-skin-normal.-checked[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-base)}.root.-skin-normal.-checked[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-brand-baseRgb),.48)}.root.-skin-normal.-checked[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-base)}.root.-skin-normal.-checked[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-brand-baseRgb),.32)}.root.-skin-normal.-checked[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-base)}.root.-skin-brand[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-brand[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-lighten20)}.root.-skin-brand[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.48)}.root.-skin-brand[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-lighten20)}.root.-skin-brand[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-brand[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-brand-lighten20)}.root.-skin-brand.-checked[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-brand.-checked[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-brand.-checked[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.48)}.root.-skin-brand.-checked[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-brand.-checked[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-brand.-checked[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-positive[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-positive[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-positive-lighten20)}.root.-skin-positive[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.48)}.root.-skin-positive[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-positive-lighten20)}.root.-skin-positive[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-positive[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-positive-lighten20)}.root.-skin-positive.-checked[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-positive.-checked[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-positive.-checked[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.48)}.root.-skin-positive.-checked[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-positive.-checked[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-positive.-checked[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-accent[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-accent[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-accent-lighten20)}.root.-skin-accent[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.48)}.root.-skin-accent[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-accent-lighten20)}.root.-skin-accent[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-accent[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-accent-lighten20)}.root.-skin-accent.-checked[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-accent.-checked[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-accent.-checked[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.48)}.root.-skin-accent.-checked[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-accent.-checked[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-accent.-checked[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-wrong[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-wrong[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-wrong-lighten20)}.root.-skin-wrong[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.48)}.root.-skin-wrong[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-wrong-lighten20)}.root.-skin-wrong[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-text-baseRgb),.32)}.root.-skin-wrong[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-wrong-lighten20)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]:hover   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.48)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]:hover   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]:active   .thumb-holder[_ngcontent-%COMP%]{background-color:rgba(var(--sky-ui-kit-color-background-baseRgb),.32)}.root.-skin-wrong.-checked[_ngcontent-%COMP%]:active   .thumb[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-base)}.root.-disabled[_ngcontent-%COMP%]{cursor:auto}.input[_ngcontent-%COMP%]{display:none}.thumb-holder[_ngcontent-%COMP%]{display:inline-block;width:28px;height:12px;margin:0 6px -1.5px;border-radius:6px;transition:all .2s linear;transition-property:background-color}.root.-disabled[_ngcontent-%COMP%]   .thumb-holder[_ngcontent-%COMP%]{opacity:.32}.thumb-container[_ngcontent-%COMP%]{transform:translateZ(0);transition:all .2s ease-in;transition-property:transform}.root.-checked[_ngcontent-%COMP%]   .thumb-container[_ngcontent-%COMP%]{transform:translateX(12px)}.thumb[_ngcontent-%COMP%]{display:block;position:absolute;width:16px;height:16px;margin-top:-2px;border-radius:50%;box-shadow:0 1px 2px rgba(0,0,0,.117103);transition:all .2s linear;transition-property:background-color,opacity}"],changeDetection:0}),e}()},"5WP5":function(e,t,n){var r=n("dnX/");e.exports=function(e,t,n){for(var o=-1,i=e.criteria,a=t.criteria,s=i.length,c=n.length;++o<s;){var u=r(i[o],a[o]);if(u)return o>=c?u:u*("desc"==n[o]?-1:1)}return e.index-t.index}},"5Y5w":function(e,t,n){var r=n("eHpp"),o=n("wxYD");e.exports=function(e,t,n,i){return null==e?[]:(o(t)||(t=null==t?[]:[t]),o(n=i?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},"7/we":function(e,t,n){var r=n("ZjRn"),o=n("hMsr"),i=n("0Ss3");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},BqUW:function(e,t,n){var r=n("HsnV"),o=n("ZZ+W"),i=n("R3gn"),a=n("yZHP"),s=n("kkM+"),c=n("wxYD"),u=n("3ajY"),l=n("Qd2C"),h="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,d,f,p){var b=c(e),k=c(t),v=b?"[object Array]":s(e),m=k?"[object Array]":s(t),y=(v="[object Arguments]"==v?h:v)==h,C=(m="[object Arguments]"==m?h:m)==h,x=v==m;if(x&&u(e)){if(!u(t))return!1;b=!0,y=!1}if(x&&!y)return p||(p=new r),b||l(e)?o(e,t,n,d,f,p):i(e,t,v,n,d,f,p);if(!(1&n)){var A=y&&g.call(e,"__wrapped__"),w=C&&g.call(t,"__wrapped__");if(A||w){var O=A?e.value():e,M=w?t.value():t;return p||(p=new r),f(O,M,n,d,p)}}return!!x&&(p||(p=new r),a(e,t,n,d,f,p))}},CEyS:function(e,t,n){var r=n("w2Tz");e.exports=function(e){return function(t){return r(t,e)}}},EC5T:function(e,t,n){"use strict";n.r(t);var r=n("8AiQ"),o=n("HIVV"),i=n("Bxap"),a=n("D57K"),s=n("1C3z"),c=n("FHHz"),u=n("HnWI"),l=n("G2Mx"),h=n("AouM"),g=n("eb+u"),d=n("AqJ0"),f=n("Jg5f"),p=n("D3kC"),b=n("4+fs"),k=n("sPR8"),v=n("Ryj/"),m=n("1FNf"),y=n("JwkY"),C=function(){function e(e){this.skyApiService=e,this.endpoints=o.j.endpoints.notifyApi}return e.prototype.loadCurrentUserConfig=function(){return this.skyApiService.post([this.endpoints],"/v1/chat/config",{withCredentials:!0})},e.\u0275fac=function(t){return new(t||e)(s.cc(y.c))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),x=function(e){return e[e.news=-1]="news",e}({}),A=function(e){return e.teacher="teacher",e.student="student",e}({}),w=function(e){return e.web="web",e.mobile="mobile",e}({}),O=function(e){return e.teacherStudent="TEACHER_STUDENT",e.dailyMatch="DAILY_MATCH",e}({}),M=n("JpoA"),_=n("lqvn"),j=n("U3QC"),F=n("IMYO"),D=n("tCQw"),P={currentUser:null,currentUserRoles:[],chatConfig:null},E=function(){function e(e){this.chatApi=e,this.store=new c.a(P),this.store$=this.store.getReadonly(),this.currentUser$=this.store$.select("currentUser").pipe(Object(k.d)(),Object(_.a)((function(e,t){return e.id===t.id})),Object(p.a)(1),Object(b.a)())}return e.prototype.loadCurrentUserConfig=function(){var e=this;return this.chatApi.loadCurrentUserConfig().pipe(Object(j.a)((function(t){e.storeSetCurrentUserRoles(t.roles),e.storeSetCurrentUser(t.user),e.storeSetChatConfig(t.config)})),Object(F.a)((function(t){return t&&t.status===D.a&&e.logAuthError(),Object(M.a)(t)})))},e.prototype.isTeacher=function(){return this.store$.get("currentUserRoles").includes(A.teacher)},e.prototype.storeSetCurrentUser=function(e){this.store.updateFields({currentUser:e})},e.prototype.storeSetCurrentUserRoles=function(e){this.store.updateFields({currentUserRoles:e})},e.prototype.storeSetChatConfig=function(e){this.store.updateFields({chatConfig:e})},e.prototype.logAuthError=function(){m.c((function(e){var t=D.f.getToken()||"";e.setExtra("localJwtTokenLength",t.length),m.a(new Error("Cannot retrieve chat config from server: 401 error happened"))}))},e.\u0275fac=function(t){return new(t||e)(s.cc(C))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),B=function(){function e(e,t){this.chatUserService=e,this.NgZone=t;var n=this.chatUserService.currentUser$,r=this.chatUserService.store$.select("chatConfig").pipe(Object(k.d)());this.firebaseApp$=n.pipe(Object(l.a)(1),Object(h.a)((function(e){return v.a.init({userCountry:e.country})})),Object(g.a)(r),Object(h.a)((function(e){var t=Object(a.__read)(e,2);return v.a.createConnection(t[1])})),Object(k.g)(this),Object(d.a)(1)),this.chatDb$=this.firebaseApp$.pipe(Object(f.a)((function(e){return e.database().ref("chat")})),Object(p.a)(1),Object(b.a)()),r.pipe(Object(g.a)(this.firebaseApp$),Object(h.a)((function(e){var t=Object(a.__read)(e,2),n=t[0];return t[1].auth().signInWithCustomToken(n.token)})),Object(k.g)(this)).subscribe({error:function(e){var t;try{throw new Error("Chat firebase auth error: "+e)}catch(e){t=e}m.c((function(e){e.setTag("source","chat.auth"),m.a(t)})),console.error(t)}})}return e.prototype.ngOnDestroy=function(){},e.prototype.onChatDbConnected=function(e){return this.chatDb$.pipe(Object(l.a)(1),Object(h.a)((function(t){return new u.a((function(n){return e(t,n)}))})),Object(k.f)(this.NgZone))},e.\u0275fac=function(t){return new(t||e)(s.cc(E),s.cc(s.z))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),S=n("QagP"),R=n("z5yO"),z=n("vKrG"),T=n("pday"),L=n("W/Ou"),I=n("3riI"),U=n("iUUs"),$=n("gQst"),N=n("12aA"),H={"\u0437\u0433":"zgh","\u0417\u0433":"Zgh","\u0410":"A","\u0430":"a","\u0411":"B","\u0431":"b","\u0412":"V","\u0432":"v","\u0413":"G","\u0433":"g","\u0490":"G","\u0491":"g","\u0414":"D","\u0434":"d","\u0415":"E","\u0435":"e","\u0401":"E","\u0451":"e","\u0416":"Zh","\u0436":"zh","\u0417":"Z","\u0437":"z","\u0418":"I","\u0438":"i","\u0419":"I","\u0439":"i","\u041a":"K","\u043a":"k","\u041b":"L","\u043b":"l","\u041c":"M","\u043c":"m","\u041d":"N","\u043d":"n","\u041e":"O","\u043e":"o","\u041f":"P","\u043f":"p","\u0420":"R","\u0440":"r","\u0421":"S","\u0441":"s","\u0422":"T","\u0442":"t","\u0423":"U","\u0443":"u","\u0424":"F","\u0444":"f","\u0425":"Kh","\u0445":"kh","\u0426":"Ts","\u0446":"ts","\u0427":"Ch","\u0447":"ch","\u0428":"Sh","\u0448":"sh","\u0429":"Shch","\u0449":"shch","\u042b":"Y","\u044b":"y","\u042d":"E","\u044d":"e","\u042e":"Iu","\u044e":"iu","\u042f":"Ia","\u044f":"ia","\u042c":"","\u044c":"","\u042a":"Ie","\u044a":"ie"},q={channels:{},currentChannelId:null},Y=function(){function e(e){var t=this;this.chatUserService=e,this.store=new c.a(q),this.store$=this.store.getReadonly(),this.currentChannel$=Object(I.a)(this.store$.select("currentChannelId"),this.store$.select("channels")).pipe(Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[0],r=t[1];return null!==n&&r[n]?r[n]:null})),Object(_.a)(),Object(p.a)(1),Object(b.a)()),this.chatUserService.store$.select("chatConfig").pipe(Object(k.d)(),Object(f.a)((function(e){return e.contacts})),Object(T.a)(0),Object(L.a)([]),Object(S.a)(),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[0];return t[1].filter((function(e){return!n.find((function(t){return t.id===e.id}))}))})),Object(R.a)((function(e){return!!e.length})),Object(f.a)((function(e){return t.formatFirebaseContactsToChannels(e)})),Object(k.g)(this)).subscribe((function(e){return t.addChannels(e)})),this.unreadCount$=this.store$.select("channels").pipe(Object(f.a)((function(e){return Object.values(e).reduce((function(e,t){return e+t.unreadCount}),0)})),Object(_.a)(),Object(p.a)(1),Object(b.a)()),this.newCurrentChannel$=this.currentChannel$.pipe(Object(_.a)((function(e,t){return e===t||!!e&&!!t&&e.id===t.id})),Object(p.a)(1),Object(b.a)())}return e.prototype.ngOnDestroy=function(){},e.prototype.setCurrentChannelId=function(e){this.store.updateFields({currentChannelId:e})},e.prototype.updateChannels=function(e){this.store.update((function(t){var n=!1,r=t.channels;return e.forEach((function(e){var t,o=e.id,i=Object(a.__rest)(e,["id"]),s=r[o];s&&(r=Object(a.__assign)(Object(a.__assign)({},r),((t={})[o]=Object(a.__assign)(Object(a.__assign)({},s),i),t)),n=!0)})),n?Object(a.__assign)(Object(a.__assign)({},t),{channels:r}):t}))},e.prototype.formatFirebaseContactsToChannels=function(e){var t=this;return e.reduce((function(e,n){var r,o,i=n.name?n.name:n.id.toString(),s=n.surname?i+" "+n.surname:i,c=t.getProfileLink(n),u=!(n.id>0)&&null,l={id:n.id,name:(o=s,Object.keys(H).forEach((function(e){return o=o.replace(new RegExp(e,"g"),H[e])})),o),isOnline:u,avatarUrl:n.avatarUrl,link:c,canSendMessages:n.answersAllowed,unreadCount:0,updatedAt:0};return Object(a.__assign)(Object(a.__assign)({},e),((r={})[n.id]=l,r))}),{})},e.prototype.getProfileLink=function(e){return e.id<=0||null!==e.matchReason&&e.matchReason!==O.teacherStudent?"":this.chatUserService.isTeacher()?o.j.chat.profileLinkDomain.student+"/profile/"+e.id:o.j.chat.profileLinkDomain.teacher+"/teachers/"+e.id},e.prototype.addChannels=function(e){this.store.update((function(t){return Object(a.__assign)(Object(a.__assign)({},t),{channels:Object(a.__assign)(Object(a.__assign)({},t.channels),e)})}))},e.\u0275fac=function(t){return new(t||e)(s.cc(E))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),W={soundEnabled:!1},X=function(){function e(e,t,n){var r,o=this;this.chatFirebaseService=e,this.chatUserService=t,this.chatChannelService=n,this.store=new c.a(W),this.newMessageSound=new Audio("https://cdn.skyeng.ru/resources/audio/chat/chat_sound_low.mp3"),this.store$=this.store.getReadonly(),this.chatUserService.currentUser$.pipe(Object(h.a)((function(e){return o.dbOnSoundEnabled(e.id)})),Object(k.g)(this)).subscribe((function(e){return o.storeSetSoundEnabled(e)})),(r=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","pointerup","touchend","keydown","keyup"].map((function(e){return Object(U.a)(document,e)})),$.a.apply(void 0,Object(a.__spread)(r)).pipe(Object(l.a)(1),Object(N.a)(void 0))).pipe(Object(h.a)((function(){return o.store$.select("soundEnabled")})),Object(h.a)((function(e){return e?o.listenNewMessages():z.a})),Object(h.a)((function(){return o.playNewMessageSound()})),Object(k.g)(this)).subscribe()}return e.prototype.ngOnDestroy=function(){},e.prototype.setSoundEnabled=function(e){var t=this;this.storeSetSoundEnabled(e),this.chatUserService.currentUser$.pipe(Object(l.a)(1),Object(h.a)((function(n){return t.dbSetSoundEnabled(n.id,e)}))).subscribe()},e.prototype.storeSetSoundEnabled=function(e){this.store.updateField("soundEnabled",e)},e.prototype.dbOnSoundEnabled=function(e){return this.chatFirebaseService.onChatDbConnected((function(t,n){var r=t.child("users/"+e+"/soundEnabled");return r.on("value",(function(e){if(e){var t=e.val();n.next(t)}})),function(){return r.off("value")}}))},e.prototype.dbSetSoundEnabled=function(e,t){return this.chatFirebaseService.onChatDbConnected((function(n,r){n.child("users/"+e+"/soundEnabled").set(t),r.next(),r.complete()}))},e.prototype.listenNewMessages=function(){return this.chatChannelService.unreadCount$.pipe(Object(_.a)(),Object(S.a)(),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[1];return!!n&&n>t[0]})),Object(R.a)((function(e){return e})))},e.prototype.playNewMessageSound=function(){return this.newMessageSound.pause(),this.newMessageSound.currentTime=0,this.newMessageSound.play()},e.\u0275fac=function(t){return new(t||e)(s.cc(B),s.cc(E),s.cc(Y))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),Z=n("LiEJ"),G=n("5Y5w"),V=n.n(G),K=n("4S5C"),J=n("fQLH"),Q=n("pN2L"),ee=n("CzDk"),te=n("nYym"),ne=n.n(te);function re(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function oe(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)}function ie(e){throw new Error("Unhandled case for value: '"+e+"'")}var ae=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,n=this.getClass(),r=this.whitespaceRegex,o=n?n.split(r):[],i=e.split(r);t=i.shift();)-1===re(o,t)&&o.push(t);return this.getAttrs().class=o.join(" "),this},e.prototype.removeClass=function(e){for(var t,n=this.getClass(),r=this.whitespaceRegex,o=n?n.split(r):[],i=e.split(r);o.length&&(t=i.shift());){var a=re(o,t);-1!==a&&o.splice(a,1)}return this.getAttrs().class=o.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}(),se=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new ae({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],r=e.getCssClassSuffixes(),o=0,i=r.length;o<i;o++)n.push(t+"-"+r[o]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,r=t.location;return"smart"===r?function(e,t,n){var r,o;null==n?(n="&hellip;",o=3,r=8):(o=n.length,r=n.length);var i=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},a=function(e,t){var r=t/2,o=Math.ceil(r),i=-1*Math.floor(r),a="";return i<0&&(a=e.substr(i)),e.substr(0,o)+n+a};if(e.length<=t)return e;var s=t-o,c=function(e){var t={},n=e,r=n.match(/^([a-z]+):\/\//i);return r&&(t.scheme=r[1],n=n.substr(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=r[1],n=n.substr(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=r[1],n=n.substr(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=r[1],n=n.substr(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(t.fragment=r[1]),t}(e);if(c.query){var u=c.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);u&&(c.query=c.query.substr(0,u[1].length),e=i(c))}if(e.length<=t)return e;if(c.host&&(c.host=c.host.replace(/^www\./,""),e=i(c)),e.length<=t)return e;var l="";if(c.host&&(l+=c.host),l.length>=s)return c.host.length==t?(c.host.substr(0,t-o)+n).substr(0,s+r):a(l,s).substr(0,s+r);var h="";if(c.path&&(h+="/"+c.path),c.query&&(h+="?"+c.query),h){if((l+h).length>=s)return(l+h).length==t?(l+h).substr(0,t):(l+a(h,s-l.length)).substr(0,s+r);l+=h}if(c.fragment){var g="#"+c.fragment;if((l+g).length>=s)return(l+g).length==t?(l+g).substr(0,t):(l+a(g,s-l.length)).substr(0,s+r);l+=g}if(c.scheme&&c.host){var d=c.scheme+"://";if((l+d).length<s)return(d+l).substr(0,t)}if(l.length<=t)return l;var f="";return s>0&&(f=l.substr(-1*Math.floor(s/2))),(l.substr(0,Math.ceil(s/2))+n+f).substr(0,s+r)}(e,n):"middle"===r?function(e,t,n){if(e.length<=t)return e;var r,o;null==n?(n="&hellip;",r=8,o=3):(r=n.length,o=n.length);var i=t-o,a="";return i>0&&(a=e.substr(-1*Math.floor(i/2))),(e.substr(0,Math.ceil(i/2))+n+a).substr(0,i+r)}(e,n):function(e,t,n){return function(e,t,n){var r;return e.length>t&&(null==n?(n="&hellip;",r=3):r=n.length,e=e.substring(0,t-r)+n),e}(e,t,void 0)}(e,n)},e}(),ce=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),ue=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return a.__extends(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(ce),le=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return a.__extends(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(ce),he=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return a.__extends(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(ce),ge=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return a.__extends(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(ce),de=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return a.__extends(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(n){return t}},t}(ce),fe=function(){return function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder}}(),pe=/[A-Za-z]/,be=/[0-9]/,ke=/\s/,ve=/['"]/,me=/[\x00-\x1F\x7F]/,ye=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,Ce=ye+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,xe=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,Ae=Ce+xe,we=Ce+xe,Oe="(?:["+xe+"]{1,3}\\.){3}["+xe+"]{1,3}",Me="["+we+"](?:["+we+"\\-]{0,61}["+we+"])?",_e=function(e){return"(?=("+Me+"))\\"+e},je=function(e){return"(?:"+_e(e)+"(?:\\."+_e(e+1)+"){0,126}|"+Oe+")"},Fe=(new RegExp("["+we+".\\-]*["+we+"\\-]"),new RegExp("["+we+"]")),De=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|verm\xf6gensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|verm\xf6gensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u0627\u0628\u0648\u0638\u0628\u064a|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0641\u0644\u0633\u0637\u064a\u0646|\u0645\u0644\u064a\u0633\u064a\u0627|\u092d\u093e\u0930\u0924\u092e\u094d|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|\u0627\u06cc\u0631\u0627\u0646|\u0628\u0627\u0632\u0627\u0631|\u0628\u06be\u0627\u0631\u062a|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0647\u0645\u0631\u0627\u0647|\u092d\u093e\u0930\u094b\u0924|\u0938\u0902\u0917\u0920\u0928|\u09ac\u09be\u0982\u09b2\u09be|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u5609\u91cc\u5927\u9152\u5e97|aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|\u0434\u0435\u0442\u0438|\u0441\u0430\u0439\u0442|\u0628\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0680\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0634\u0628\u0643\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0645\u0648\u0642\u0639|\u092d\u093e\u0930\u0924|\u09ad\u09be\u09b0\u09a4|\u09ad\u09be\u09f0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b2d\u0b3e\u0b30\u0b24|\u0cad\u0cbe\u0cb0\u0ca4|\u0dbd\u0d82\u0d9a\u0dcf|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u30dd\u30a4\u30f3\u30c8|\u5927\u4f17\u6c7d\u8f66|\u7ec4\u7ec7\u673a\u6784|\u96fb\u8a0a\u76c8\u79d1|\u9999\u683c\u91cc\u62c9|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|\u0431\u0435\u043b|\u043a\u043e\u043c|\u049b\u0430\u0437|\u043c\u043a\u0434|\u043c\u043e\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0440\u0431|\u0443\u043a\u0440|\u0570\u0561\u0575|\u05e7\u05d5\u05dd|\u0639\u0631\u0628|\u0642\u0637\u0631|\u0643\u0648\u0645|\u0645\u0635\u0631|\u0915\u0949\u092e|\u0928\u0947\u091f|\u0e04\u0e2d\u0e21|\u0e44\u0e17\u0e22|\u30b9\u30c8\u30a2|\u30bb\u30fc\u30eb|\u307f\u3093\u306a|\u4e2d\u6587\u7f51|\u5929\u4e3b\u6559|\u6211\u7231\u4f60|\u65b0\u52a0\u5761|\u6de1\u9a6c\u9521|\u8bfa\u57fa\u4e9a|\u98de\u5229\u6d66|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u03b5\u03bb|\u0431\u0433|\u0435\u044e|\u0440\u0444|\u10d2\u10d4|\ub2f7\ub137|\ub2f7\ucef4|\uc0bc\uc131|\ud55c\uad6d|\u30b3\u30e0|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u56fd|\u4e2d\u570b|\u4f01\u4e1a|\u4f5b\u5c71|\u4fe1\u606f|\u5065\u5eb7|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u53f0\u6e7e|\u53f0\u7063|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5609\u91cc|\u5728\u7ebf|\u5927\u62ff|\u5a31\u4e50|\u5bb6\u96fb|\u5de5\u884c|\u5e7f\u4e1c|\u5fae\u535a|\u6148\u5584|\u624b\u673a|\u624b\u8868|\u62db\u8058|\u653f\u52a1|\u653f\u5e9c|\u65b0\u95fb|\u65f6\u5c1a|\u66f8\u7c4d|\u673a\u6784|\u6e38\u620f|\u6fb3\u9580|\u70b9\u770b|\u73e0\u5b9d|\u79fb\u52a8|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7ad9|\u7f51\u7edc|\u8054\u901a|\u8c37\u6b4c|\u8d2d\u7269|\u901a\u8ca9|\u96c6\u56e2|\u98df\u54c1|\u9910\u5385|\u9999\u6e2f)/,Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=new RegExp("["+we+"!#$%&'*+/=?^_`{|}~-]"),t.strictTldRegex=new RegExp("^"+De.source+"$"),t}return a.__extends(t,e),t.prototype.parseMatches=function(e){for(var t=this.tagBuilder,n=this.localPartCharRegex,r=this.strictTldRegex,o=[],i=e.length,s=new Ee,c={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},u=0,l=0,h=s;u<i;){var g=e.charAt(u);switch(l){case 0:d(g);break;case 1:f(e.charAt(u-1),g);break;case 2:p(g);break;case 3:b(g);break;case 4:k(g);break;case 5:v(g);break;case 6:m(g);break;case 7:y(g);break;default:ie(l)}u++}return A(),o;function d(e){"m"===e?C(1):n.test(e)&&C()}function f(e,t){":"===e?n.test(t)?(l=2,h=new Ee(a.__assign({},h,{hasMailtoPrefix:!0}))):x():c[e]===t||(n.test(t)?l=2:"."===t?l=3:"@"===t?l=4:x())}function p(e){"."===e?l=3:"@"===e?l=4:n.test(e)||x()}function b(e){"."===e||"@"===e?x():n.test(e)?l=2:x()}function k(e){Fe.test(e)?l=5:x()}function v(e){"."===e?l=7:"-"===e?l=6:Fe.test(e)||A()}function m(e){"-"===e||"."===e?A():Fe.test(e)?l=5:A()}function y(e){"."===e||"-"===e?A():Fe.test(e)?(l=5,h=new Ee(a.__assign({},h,{hasDomainDot:!0}))):A()}function C(e){void 0===e&&(e=2),l=e,h=new Ee({idx:u})}function x(){l=0,h=s}function A(){if(h.hasDomainDot){var n=e.slice(h.idx,u);/[-.]$/.test(n)&&(n=n.slice(0,-1));var i=h.hasMailtoPrefix?n.slice("mailto:".length):n;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return r.test(t)})(i)&&o.push(new ue({tagBuilder:t,matchedText:n,offset:h.idx,email:i}))}x()}},t}(fe),Ee=function(){return function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot}}(),Be=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t||this.hasFullProtocolRegex.test(t)||this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+ye+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}(),Se=function(e){function t(t){var n,r=e.call(this,t)||this;return r.stripPrefix={scheme:!0,www:!0},r.stripTrailingSlash=!0,r.decodePercentEncoding=!0,r.matcherRegex=(n=new RegExp("[/?#](?:["+we+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^\u2713]*["+we+"\\-+&@#/%=~_()|'$*\\[\\]{}\u2713])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,je(2),")","|","(","(//)?",/(?:www\.)/.source,je(6),")","|","(","(//)?",je(10)+"\\.",De.source,"(?![-"+Ae+"])",")",")","(?::[0-9]+)?","(?:"+n.source+")?"].join(""),"gi")),r.wordCharRegExp=new RegExp("["+we+"]"),r.stripPrefix=t.stripPrefix,r.stripTrailingSlash=t.stripTrailingSlash,r.decodePercentEncoding=t.decodePercentEncoding,r}return a.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.stripPrefix,o=this.stripTrailingSlash,i=this.decodePercentEncoding,a=this.tagBuilder,s=[],c=function(){var n=t[0],c=t[1],l=t[4],h=t.index,g=t[5]||t[9],d=e.charAt(h-1);if(!Be.isValid(n,c))return"continue";if(h>0&&"@"===d)return"continue";if(h>0&&g&&u.wordCharRegExp.test(d))return"continue";if(/\?$/.test(n)&&(n=n.substr(0,n.length-1)),u.matchHasUnbalancedClosingParen(n))n=n.substr(0,n.length-1);else{var f=u.matchHasInvalidCharAfterTld(n,c);f>-1&&(n=n.substr(0,f))}var p=["http://","https://"].find((function(e){return!!c&&-1!==c.indexOf(e)}));if(p){var b=n.indexOf(p);n=n.substr(b),c=c.substr(b),h+=b}s.push(new de({tagBuilder:a,matchedText:n,offset:h,urlMatchType:c?"scheme":l?"www":"tld",url:n,protocolUrlMatch:!!c,protocolRelativeMatch:!!g,stripPrefix:r,stripTrailingSlash:o,decodePercentEncoding:i}))},u=this;null!==(t=n.exec(e));)c();return s},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,n=e.charAt(e.length-1);if(")"===n)t="(";else if("]"===n)t="[";else{if("}"!==n)return!1;t="{"}for(var r=0,o=0,i=e.length-1;o<i;o++){var a=e.charAt(o);a===t?r++:a===n&&(r=Math.max(r-1,0))}return 0===r},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var r=new RegExp("^((.?//)?[-."+we+"]*[-"+we+"]\\.[-"+we+"]+)").exec(e);return null===r?-1:(n+=r[1].length,e=e.slice(r[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(fe),Re=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=new RegExp("#[_"+we+"]{1,139}(?![_"+we+"])","g"),n.nonWordCharRegex=new RegExp("[^"+we+"]"),n.serviceName=t.serviceName,n}return a.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.nonWordCharRegex,o=this.serviceName,i=this.tagBuilder,a=[];null!==(t=n.exec(e));){var s=t.index,c=e.charAt(s-1);if(0===s||r.test(c)){var u=t[0],l=t[0].slice(1);a.push(new le({tagBuilder:i,matchedText:u,offset:s,serviceName:o,hashtag:l}))}}return a},t}(fe),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/g,t}return a.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,r=this.tagBuilder,o=[];null!==(t=n.exec(e));){var i=t[0],a=i.replace(/[^0-9,;#]/g,""),s=!(!t[1]&&!t[2]),c=0==t.index?"":e.substr(t.index-1,1),u=e.substr(t.index+i.length,1),l=!c.match(/\d/)&&!u.match(/\d/);this.testMatch(t[3])&&this.testMatch(i)&&l&&o.push(new ge({tagBuilder:r,matchedText:i,offset:t.index,number:a,plusSign:s}))}return o},t.prototype.testMatch=function(e){return/\D/.test(e)},t}(fe),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:new RegExp("@[_"+we+"]{1,50}(?![_"+we+"])","g"),instagram:new RegExp("@[_."+we+"]{1,30}(?![_"+we+"])","g"),soundcloud:new RegExp("@[-_."+we+"]{1,50}(?![-_"+we+"])","g")},n.nonWordCharRegex=new RegExp("[^"+we+"]"),n.serviceName=t.serviceName,n}return a.__extends(t,e),t.prototype.parseMatches=function(e){var t,n=this.serviceName,r=this.matcherRegexes[this.serviceName],o=this.nonWordCharRegex,i=this.tagBuilder,a=[];if(!r)return a;for(;null!==(t=r.exec(e));){var s=t.index,c=e.charAt(s-1);if(0===s||o.test(c)){var u=t[0].replace(/\.+$/g,""),l=u.slice(1);a.push(new he({tagBuilder:i,matchedText:u,offset:s,serviceName:n,mention:l}))}}return a},t}(fe),Le=function(){return function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing}}(),Ie=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n&&"soundcloud"!==n)throw new Error("invalid `mention` cfg - see docs");var r=this.hashtag;if(!1!==r&&"twitter"!==r&&"facebook"!==r&&"instagram"!==r)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,n=["a","style","script"],r=0,o=[];return function(e,t){for(var n,r=t.onOpenTag,o=t.onCloseTag,i=t.onText,s=t.onComment,c=t.onDoctype,u=new Le,l=0,h=e.length,g=0,d=0,f=u;l<h;){var p=e.charAt(l);switch(g){case 0:b(p);break;case 1:k(p);break;case 2:m(p);break;case 3:v(p);break;case 4:y(p);break;case 5:C(p);break;case 6:x(p);break;case 7:A(p);break;case 8:w(p);break;case 9:O(p);break;case 10:M(p);break;case 11:_(p);break;case 12:j(p);break;case 13:"--"===e.substr(l,2)?(l+=2,f=new Le(a.__assign({},f,{type:"comment"})),g=14):"DOCTYPE"===e.substr(l,7).toUpperCase()?(l+=7,f=new Le(a.__assign({},f,{type:"doctype"})),g=20):z();break;case 14:F(p);break;case 15:D(p);break;case 16:P(p);break;case 17:E(p);break;case 18:B(p);break;case 19:S(p);break;case 20:R(p);break;default:ie(g)}l++}function b(e){"<"===e&&T()}function k(e){"!"===e?g=13:"/"===e?(g=2,f=new Le(a.__assign({},f,{isClosing:!0}))):"<"===e?T():pe.test(e)?(g=3,f=new Le(a.__assign({},f,{isOpening:!0}))):(g=0,f=u)}function v(e){ke.test(e)?(f=new Le(a.__assign({},f,{name:I()})),g=4):"<"===e?T():"/"===e?(f=new Le(a.__assign({},f,{name:I()})),g=12):">"===e?(f=new Le(a.__assign({},f,{name:I()})),L()):pe.test(e)||be.test(e)||":"===e||z()}function m(e){">"===e?z():pe.test(e)?g=3:z()}function y(e){ke.test(e)||("/"===e?g=12:">"===e?L():"<"===e?T():"="===e||ve.test(e)||me.test(e)?z():g=5)}function C(e){ke.test(e)?g=6:"/"===e?g=12:"="===e?g=7:">"===e?L():"<"===e?T():ve.test(e)&&z()}function x(e){ke.test(e)||("/"===e?g=12:"="===e?g=7:">"===e?L():"<"===e?T():ve.test(e)?z():g=5)}function A(e){ke.test(e)||('"'===e?g=8:"'"===e?g=9:/[>=`]/.test(e)?z():"<"===e?T():g=10)}function w(e){'"'===e&&(g=11)}function O(e){"'"===e&&(g=11)}function M(e){ke.test(e)?g=4:">"===e?L():"<"===e&&T()}function _(e){ke.test(e)?g=4:"/"===e?g=12:">"===e?L():"<"===e?T():(g=4,l--)}function j(e){">"===e?(f=new Le(a.__assign({},f,{isClosing:!0})),L()):g=4}function F(e){"-"===e?g=15:">"===e?z():g=16}function D(e){"-"===e?g=18:">"===e?z():g=16}function P(e){"-"===e&&(g=17)}function E(e){g="-"===e?18:16}function B(e){">"===e?L():"!"===e?g=19:"-"===e||(g=16)}function S(e){"-"===e?g=17:">"===e?L():g=16}function R(e){">"===e?L():"<"===e&&T()}function z(){g=0,f=u}function T(){g=1,f=new Le({idx:l})}function L(){var t=e.slice(d,f.idx);t&&i(t,d),"comment"===f.type?s(f.idx):"doctype"===f.type?c(f.idx):(f.isOpening&&r(f.name,f.idx),f.isClosing&&o(f.name,f.idx)),z(),d=l+1}function I(){return e.slice(f.idx+(f.isClosing?2:1),l).toLowerCase()}d<l&&(n=e.slice(d,l),i(n,d),d=l+1)}(e,{onOpenTag:function(e){n.indexOf(e)>=0&&r++},onText:function(e,n){if(0===r){var i=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,r=[],o=0;n=t.exec(e);)r.push(e.substring(o,n.index)),r.push(n[0]),o=n.index+n[0].length;return r.push(e.substring(o)),r}(e,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),a=n;i.forEach((function(e,n){if(n%2==0){var r=t.parseText(e,a);o.push.apply(o,r)}a+=e.length}))}},onCloseTag:function(e){n.indexOf(e)>=0&&(r=Math.max(r-1,0))},onComment:function(e){},onDoctype:function(e){}}),o=this.compactMatches(o),o=this.removeUnwantedMatches(o)},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;t++){var n=e[t],r=n.getOffset(),o=n.getMatchedText().length,i=r+o;if(t+1<e.length){if(e[t+1].getOffset()===r){var a=e[t+1].getMatchedText().length>o?t:t+1;e.splice(a,1);continue}e[t+1].getOffset()<i&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||oe(e,(function(e){return"hashtag"===e.getType()})),this.email||oe(e,(function(e){return"email"===e.getType()})),this.phone||oe(e,(function(e){return"phone"===e.getType()})),this.mention||oe(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||oe(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.wwwMatches||oe(e,(function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()})),this.urls.tldMatches||oe(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var n=this.getMatchers(),r=[],o=0,i=n.length;o<i;o++){for(var a=n[o].parseMatches(e),s=0,c=a.length;s<c;s++)a[s].setOffset(t+a[s].getOffset());r.push.apply(r,a)}return r},e.prototype.link=function(e){if(!e)return"";for(var t=this.parse(e),n=[],r=0,o=0,i=t.length;o<i;o++){var a=t[o];n.push(e.substring(r,a.getOffset())),n.push(this.createMatchReturnVal(a)),r=a.getOffset()+a.getMatchedText().length}return n.push(e.substring(r)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof ae?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new Re({tagBuilder:e,serviceName:this.hashtag}),new Pe({tagBuilder:e}),new ze({tagBuilder:e}),new Te({tagBuilder:e,serviceName:this.mention}),new Se({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new se({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.13.0",e.AnchorTagBuilder=se,e.HtmlTag=ae,e.matcher={Email:Pe,Hashtag:Re,Matcher:fe,Mention:Te,Phone:ze,Url:Se},e.match={Email:ue,Hashtag:le,Match:ce,Mention:he,Phone:ge,Url:de},e}(),Ue=n("Ata6"),$e=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*\\.(?:jpeg|jpg|png|gif))(?:[\\?]([^#]*))?(?:#(.*))?(?::(.*))?$","i"),Ne={messages:[]},He=function(){function e(e,t){var n=this;this.chatChannelService=e,this.domSanitizer=t,this.loadMore=new J.a,this.store=new c.a(Ne),this.autolinker=new Ie({truncate:32}),this.store$=this.store.getReadonly(),this.linkParser=function(e){return e.flatMap((function(e){if("text"!==e.type)return e;var t=0,r=n.autolinker.parse(e.text).flatMap((function(n){var r=n.getAnchorHref(),o=n.getOffset(),i=e.text.slice(t,o),a=i?{type:"text",text:i}:void 0,s=r.match($e)?{type:"image",url:r}:{type:"link",text:r,url:r};return t=o+r.length,a?[a,s]:s}));if(!r.length)return e;var o=e.text.slice(t);return o&&(r=Object(a.__spread)(r,[{type:"text",text:o}])),r}))},this.visibleMessagesCount$=this.chatChannelService.store$.select("currentChannelId").pipe(Object(h.a)((function(e){return null!==e?n.listenVisibleMessagesCount():Object(Q.a)(0)})),Object(p.a)(1),Object(b.a)()),this.allMessagesAreLoaded$=Object(I.a)([this.store.select("messages"),this.visibleMessagesCount$]).pipe(Object(f.a)((function(e){var t=Object(a.__read)(e,2);return t[1]>=t[0].length})),Object(_.a)(),Object(p.a)(1),Object(b.a)()),this.messagesGroups$=this.chatChannelService.store$.select("currentChannelId").pipe(Object(h.a)((function(e){return null!==e?n.listenMessagesGroups():Object(Q.a)([])})),Object(p.a)(1),Object(b.a)()),this.chatChannelService.store$.select("currentChannelId").pipe(Object(k.d)(),Object(k.g)(this)).subscribe((function(){return n.storeSetMessages([])})),this.store$.on("newMessages").pipe(Object(R.a)((function(e){return!!e.length})),Object(g.a)(this.store$.select("messages")),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[0],r=t[1];return Object(a.__spread)(r,n)})),Object(f.a)((function(e){return V()(e,(function(e){return e.addedAt}),"asc")})),Object(k.g)(this)).subscribe((function(e){return n.storeSetMessages(e)}))}return e.prototype.ngOnDestroy=function(){},e.prototype.loadMoreMessages=function(){this.loadMore.next()},e.prototype.sendMessage=function(e){(e=ne()(e).trim())&&this.store.fire("sendMessage",e)},e.prototype.addMessages=function(e){this.store.fire("newMessages",e)},e.prototype.getMessageTime=function(e){var t=new Date(e),n=t.getMinutes(),r=t.getHours();return n>=10?r+":"+n:r+":0"+n},e.prototype.getMessageDay=function(e){return Object(ee.a)(e,"iiii, d LLLL")},e.prototype.getMessageBlocksFromContent=function(e,t){return t?this.parseHtmlAllowedMessageContent(e):[this.linkParser].reduce((function(e,t){return t(e)}),[{type:"text",text:e}])},e.prototype.listenVisibleMessagesCount=function(){return this.loadMore.pipe(Object(L.a)(void 0),Object(K.a)((function(e){return e+30}),0))},e.prototype.listenMessagesGroups=function(){var e=this;return Object(I.a)([this.store.select("messages"),this.visibleMessagesCount$]).pipe(Object(f.a)((function(e){var t=Object(a.__read)(e,2);return t[0].slice(-t[1])})),Object(f.a)((function(t){return e.formatMessagesToGroups(t)})))},e.prototype.formatMessagesToGroups=function(e){var t=e.reduce((function(e,t){var n=t.day,r=e.get(n);return r=r?Object(a.__assign)(Object(a.__assign)({},r),{messages:Object(a.__spread)(r.messages,[t])}):{date:n,messages:[t]},e.set(n,r)}),new Map);return Object(a.__spread)(t.values())},e.prototype.sanitizeHtmlContent=function(e){return e=ne()(e,["p","b","i","a","img","br"]),this.domSanitizer.bypassSecurityTrustHtml(e)},e.prototype.storeSetMessages=function(e){this.store.updateFields({messages:e})},e.prototype.parseHtmlAllowedMessageContent=function(e){return e=e.replace(/<a/g,'<a target="_blank" rel="noopener"'),e=this.autolinker.link(e),[{type:"html",content:this.sanitizeHtmlContent(e)}]},e.\u0275fac=function(t){return new(t||e)(s.cc(Y),s.cc(Ue.b))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),qe=function(){function e(e,t){var n=this;this.chatUserService=e,this.chatFirebaseService=t,this.chatUserService.loadCurrentUserConfig().subscribe(),this.dbOnConnected().pipe(Object(R.a)((function(e){return e})),Object(g.a)(this.chatUserService.currentUser$),Object(h.a)((function(e){var t=Object(a.__read)(e,2);return n.dbSetPresense(t[1].id,t[0])})),Object(k.g)(this)).subscribe(),Object(U.a)(window,"chat.updateChannels").pipe(Object(f.a)((function(e){return e.detail}))).pipe(Object(h.a)((function(){return n.chatUserService.loadCurrentUserConfig()})),Object(k.g)(this)).subscribe()}return e.prototype.ngOnDestroy=function(){},e.prototype.dbOnConnected=function(){return this.chatFirebaseService.onChatDbConnected((function(e,t){var n=e.root.child(".info/connected");return n.on("value",(function(e){if(e){var n=!0===e.val();t.next(n)}})),function(){return n.off("value")}}))},e.prototype.dbSetPresense=function(e,t){return this.chatFirebaseService.onChatDbConnected((function(n,r){n.child("/presence/"+e).push(t).onDisconnect().remove(),r.next(),r.complete()}))},e.\u0275fac=function(t){return new(t||e)(s.cc(E),s.cc(B))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),Ye=function(){function e(e){var t=this;this.chatChannelService=e,this.chatChannelService.unreadCount$.subscribe((function(e){t.updateFavicons(e),t.updateTitle(e)})),this.onTitleChanged().pipe(Object(g.a)(this.chatChannelService.unreadCount$),Object(R.a)((function(e){return Object(a.__read)(e,2)[1]>0})),Object(k.g)(this)).subscribe((function(e){var n=Object(a.__read)(e,2)[1];t.updateTitle(n),t.updateFavicons(n)}))}return e.prototype.ngOnDestroy=function(){},e.prototype.updateTitle=function(e){var t=e>0?"("+e+") ":"",n=window.document.title.match(/\((\d+)\)\s/);n&&+n[1]!==e?window.document.title=window.document.title.replace(/\(\d+\)\s/,t):n||(window.document.title=t+window.document.title)},e.prototype.updateFavicons=function(e){e?this.addFaviconsMark():this.removeFaviconsMark()},e.prototype.addFaviconsMark=function(){var e=this;this.getFaviconElements().forEach((function(t){if(!e.faviconAlreadyModified(t)){var n=t.getAttribute("href");t.dataset.originalUrl=n;var r=new Image;r.onload=function(){var n=document.createElement("canvas"),o=r.width;n.width=n.height=o;var i=n.getContext("2d");i.drawImage(r,0,0),e.drawMark(i,o),t.setAttribute("href",n.toDataURL())},r.src=n}}))},e.prototype.removeFaviconsMark=function(){var e=this;this.getFaviconElements().forEach((function(t){e.faviconAlreadyModified(t)&&t.dataset.originalUrl&&(t.href=t.dataset.originalUrl)}))},e.prototype.faviconAlreadyModified=function(e){return 0===e.href.indexOf("data:")},e.prototype.drawMark=function(e,t){e.fillStyle="#fc6e51",e.strokeStyle="#ffffff",e.lineWidth=3,e.beginPath(),e.ellipse(.8*t,.2*t,.2*t,.2*t,0,0,2*Math.PI),e.fill(),e.stroke()},e.prototype.getFaviconElements=function(){return Array.from(document.head.querySelectorAll('link[rel*="icon"]'))},e.prototype.onTitleChanged=function(){return new u.a((function(e){var t=new MutationObserver((function(){return e.next()}));return t.observe(document.querySelector("title"),{subtree:!0,characterData:!0,childList:!0}),function(){return t.disconnect()}}))},e.\u0275fac=function(t){return new(t||e)(s.cc(Y))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),We=n("nF3N"),Xe=n("4HYP"),Ze=function(){function e(e,t,n,r){var o=this;this.chatChannelService=e,this.chatFirebaseService=t,this.chatMessageService=n,this.chatUserService=r,this.listenUnreadCounter(),this.listenOnlineStatus(),this.listenNewMessages(),this.chatMessageService.store$.on("sendMessage").pipe(Object(g.a)(this.chatChannelService.currentChannel$,this.chatUserService.currentUser$),Object(h.a)((function(e){var t=Object(a.__read)(e,3);return o.sendMessage(t[0],t[1].id,t[2].id)})),Object(k.g)(this)).subscribe()}return e.prototype.ngOnDestroy=function(){},e.prototype.listenUnreadCounter=function(){var e=this,t=this.chatUserService.currentUser$.pipe(Object(h.a)((function(t){return e.dbListenConversations(t.id)})),Object(p.a)(1),Object(b.a)());t.pipe(Object(g.a)(this.chatChannelService.currentChannel$),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[1];return t[0].filter((function(e){return!n||e.userId!==n.id}))})),Object(k.g)(this)).subscribe((function(t){return e.updateChannelsUnreadCounter(t)}));var n=this.chatChannelService.newCurrentChannel$.pipe(Object(k.d)(),Object(R.a)((function(t){return e.isPrivateChannel(t)&&t.unreadCount>0})),Object(f.a)((function(e){return e.id}))),r=t.pipe(Object(g.a)(this.chatChannelService.currentChannel$),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[1];return t[0].find((function(e){return!!n&&e.userId===n.id}))})),Object(k.d)(),Object(R.a)((function(e){return e.unreadMessages>0})),Object(f.a)((function(e){return e.userId})));Object($.a)(n,r).pipe(Object(g.a)(this.chatUserService.currentUser$),Object(h.a)((function(t){var n=Object(a.__read)(t,2);return e.resetChannelUnreadCount(n[0],n[1].id)})),Object(k.g)(this)).subscribe()},e.prototype.listenNewMessages=function(){var e=this;this.chatChannelService.newCurrentChannel$.pipe(Object(g.a)(this.chatUserService.currentUser$),Object(h.a)((function(t){var n=Object(a.__read)(t,2),r=n[0],o=n[1];return e.isPrivateChannel(r)?e.dbListenChannelMessages(r.id,o.id):z.a})),Object(g.a)(this.chatUserService.currentUser$),Object(f.a)((function(t){var n=Object(a.__read)(t,2),r=n[1];return n[0].map((function(t){return e.formatMessage(t,r.id)}))})),Object(k.g)(this)).subscribe((function(t){return e.chatMessageService.addMessages(t)}))},e.prototype.listenOnlineStatus=function(){var e=this;this.chatChannelService.store$.select("channels").pipe(Object(f.a)((function(t){return Object.values(t).filter((function(t){return e.isPrivateChannel(t)&&t.id>0})).map((function(e){return e.id}))})),Object(L.a)([]),Object(S.a)(),Object(f.a)((function(e){var t=Object(a.__read)(e,2),n=t[0];return t[1].filter((function(e){return!n.includes(e)}))})),Object(We.a)(),Object(Xe.a)((function(t){return e.dbListenChannelOnline(t).pipe(Object(f.a)((function(e){return{id:t,isOnline:e}})))})),Object(k.b)(0),Object(k.g)(this)).subscribe((function(t){return e.chatChannelService.updateChannels(t)}))},e.prototype.dbListenChannelMessages=function(e,t){var n=this;return this.chatFirebaseService.onChatDbConnected((function(r,o){var i=n.getMessagesChannel(e,t),a=r.child(i),s=!1;return a.limitToLast(1).on("child_added",(function(e){if(e&&s){var t=e.val();o.next([t])}})),a.limitToLast(333).once("value",(function(e){if(e){var t=e.val();if(t){var n=Object.values(t).filter((function(e){return"object"==typeof e}));o.next(n)}s=!0}})),function(){a.off("child_added"),a.off("value")}}))},e.prototype.dbListenConversations=function(e){return this.chatFirebaseService.onChatDbConnected((function(t,n){var r=Date.now()-80352e5,o=t.child("/conversation/"+e).orderByChild("updatedAt").startAt(r);return o.on("value",(function(e){if(e&&e.val()){var t=Object.values(e.val());n.next(t)}})),function(){return o.off("value")}}))},e.prototype.updateChannelsUnreadCounter=function(e){var t=e.map((function(e){return{id:e.userId,unreadCount:e.unreadMessages,updatedAt:e.updatedAt}}));this.chatChannelService.updateChannels(t)},e.prototype.resetChannelUnreadCount=function(e,t){return this.chatChannelService.updateChannels([{id:e,unreadCount:0}]),this.dbResetConversationUnreadMessages(t,e)},e.prototype.dbListenChannelOnline=function(e){return this.chatFirebaseService.onChatDbConnected((function(t,n){var r=t.child("/presence/"+e);return r.on("value",(function(e){if(e){var t=null!==e.val();n.next(t)}})),function(){return r.off("value")}}))},e.prototype.dbResetConversationUnreadMessages=function(e,t){return this.chatFirebaseService.onChatDbConnected((function(n,r){n.child("/conversation/"+e+"/"+t).transaction((function(e){return Object(a.__assign)(Object(a.__assign)({},e),{updatedAt:v.a.getTimestamp(),unreadMessages:0})}),(function(){r.next(),r.complete()}))}))},e.prototype.getMessagesChannel=function(e,t){return"/chat/"+Math.min(t,e)+"/"+Math.max(t,e)},e.prototype.sendMessage=function(e,t,n){var r={addedAt:v.a.getTimestamp(),userId:n,content:e,sentFrom:w.web,updateCounter:!0};return this.dbSetMessage(t,n,r)},e.prototype.dbSetMessage=function(e,t,n){var r=this;return this.chatFirebaseService.onChatDbConnected((function(o,i){var a=r.getMessagesChannel(e,t);o.child(a).push().set(n),i.next(),i.complete()}))},e.prototype.isPrivateChannel=function(e){return!!e&&e.id!==x.news},e.prototype.formatMessage=function(e,t){e.userId=e.userId?+e.userId:e.userId;var n,r=e.userId===t,o=void 0===(n=e.userId)||n<=0,i=this.chatMessageService.getMessageTime(e.addedAt),a=this.chatMessageService.getMessageDay(e.addedAt),s=this.chatMessageService.getMessageBlocksFromContent(e.content,o);return{isMy:r,isFromBot:o,time:i,day:a,blocks:s,onlyImage:1===s.length&&"image"===s[0].type,content:e.content,addedAt:e.addedAt}},e.\u0275fac=function(t){return new(t||e)(s.cc(Y),s.cc(B),s.cc(He),s.cc(E))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),Ge=n("LPC+"),Ve=n.n(Ge),Ke=function(){function e(e,t,n,r){var o=this;this.chatChannelService=e,this.chatFirebaseService=t,this.chatMessageService=n,this.chatUserService=r,this.chatChannelService.newCurrentChannel$.pipe(Object(h.a)((function(e){return o.isNewsChannel(e)?o.listenNewsMessages():z.a})),Object(f.a)((function(e){return e.map((function(e){return o.formatMessage(e)}))})),Object(k.g)(this)).subscribe((function(e){return o.chatMessageService.addMessages(e)})),this.listenUnreadCount()}return e.prototype.ngOnDestroy=function(){},e.prototype.listenNewsMessages=function(){var e=this;return this.chatUserService.currentUser$.pipe(Object(f.a)((function(t){return e.getNewsChannels("messages",t.id,e.chatUserService.isTeacher())})),Object(We.a)(),Object(Xe.a)((function(t){return e.dbOnChannelMessages(t)})))},e.prototype.listenUnreadCount=function(){var e=this,t=this.chatUserService.currentUser$.pipe(Object(h.a)((function(t){return e.dbLoadLastReadTime(t.id)})),Object(p.a)(1),Object(b.a)()),n=this.chatUserService.currentUser$.pipe(Object(f.a)((function(t){return e.getNewsChannels("added",t.id,e.chatUserService.isTeacher())})),Object(We.a)(),Object(Xe.a)((function(t){return e.dbListenAddedAt(t)})),Object(g.a)(t),Object(R.a)((function(e){var t=Object(a.__read)(e,2);return t[0]>t[1]})),Object(f.a)((function(e){return Object(a.__read)(e,1)[0]})),Object(k.b)(0),Object(f.a)((function(e){return{count:e.length,lastAddedAt:Ve()(e)}}))).pipe(Object(p.a)(1),Object(b.a)()),r=this.chatChannelService.store$.select("channels").pipe(Object(f.a)((function(e){return e[x.news]||null})),Object(k.d)());n.pipe(Object(g.a)(r),Object(k.g)(this)).subscribe((function(t){var n=Object(a.__read)(t,2),r=n[0];e.chatChannelService.updateChannels([{id:x.news,updatedAt:r.lastAddedAt,unreadCount:n[1].unreadCount+r.count}])}));var o=this.chatChannelService.newCurrentChannel$.pipe(Object(k.d)(),Object(R.a)((function(t){return e.isNewsChannel(t)&&t.unreadCount>0})),Object(f.a)((function(e){return e.id})),Object(T.a)(0)),i=this.chatChannelService.newCurrentChannel$.pipe(Object(h.a)((function(t){return t&&e.isNewsChannel(t)?n.pipe(Object(R.a)((function(e){return e.count>0})),Object(N.a)(t.id)):z.a})));Object($.a)(o,i).pipe(Object(g.a)(this.chatUserService.currentUser$),Object(h.a)((function(t){var n=Object(a.__read)(t,2);return e.resetChannelUnreadCount(n[0],n[1].id)})),Object(k.g)(this)).subscribe()},e.prototype.resetChannelUnreadCount=function(e,t){return this.chatChannelService.updateChannels([{id:e,unreadCount:0}]),this.dbSetLastReadTime(t,v.a.getTimestamp())},e.prototype.dbOnChannelMessages=function(e){return this.chatFirebaseService.onChatDbConnected((function(t,n){var r=t.child(e).orderByChild("addedAt"),o=!1;return r.limitToLast(1).on("child_added",(function(e){if(e&&o){var t=e.val();n.next([t])}})),r.limitToLast(100).once("value",(function(e){if(e){var t=e.val();if(t){var r=Object.values(t);n.next(r)}o=!0}})),function(){r.off("child_added"),r.off("value")}}))},e.prototype.isNewsChannel=function(e){return!!e&&e.id===x.news},e.prototype.getNewsChannels=function(e,t,n){return["/news/"+e+"/"+t,"/news/"+e+"/all",n?"/news/"+e+"/teachers":"/news/"+e+"/students"]},e.prototype.formatMessage=function(e){return{isMy:!1,isFromBot:!0,time:this.chatMessageService.getMessageTime(e.addedAt),day:this.chatMessageService.getMessageDay(e.addedAt),blocks:this.chatMessageService.getMessageBlocksFromContent(e.content,!0),onlyImage:!1,content:e.content,addedAt:e.addedAt}},e.prototype.dbLoadLastReadTime=function(e){var t=this,n=this.getReadChannelName(e);return this.chatFirebaseService.onChatDbConnected((function(r,o){var i=r.child(n);return r.child(n).once("value",(function(n){var r=+n.val();r||(r=Date.now(),t.dbSetLastReadTime(e,r).subscribe()),o.next(r)})),function(){return i.off("value")}}))},e.prototype.getReadChannelName=function(e){return"/news/read/"+e},e.prototype.dbSetLastReadTime=function(e,t){var n=this.getReadChannelName(e);return this.chatFirebaseService.onChatDbConnected((function(e,r){e.child(n).set(t),r.next(),r.complete()}))},e.prototype.dbListenAddedAt=function(e){return this.chatFirebaseService.onChatDbConnected((function(t,n){var r=Date.now()-80352e5,o=t.child(e).orderByValue().startAt(r),i=!1;return o.limitToLast(1).on("child_added",(function(e){if(e&&i){var t=e.val();t&&n.next(t)}})),o.once("value",(function(e){if(e){var t=e.val();t&&(Object.values(t||{}).forEach((function(e){return n.next(e)})),i=!0)}})),function(){o.off("child_added"),o.off("value")}}))},e.\u0275fac=function(t){return new(t||e)(s.cc(Y),s.cc(B),s.cc(He),s.cc(E))},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e}(),Je=n("t1vl"),Qe=n("5LXd"),et=n("jHdb"),tt=function(){function e(){this.change=new s.n}return e.prototype.onChange=function(e){this.change.emit(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-sound-setting"]],inputs:{soundEnabled:"soundEnabled"},outputs:{change:"change"},decls:5,vars:4,consts:[[1,"root"],[3,"checked","checkedChange"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"label"),s.Yb(2,"sky-ui-switch",1),s.gc("checkedChange",(function(e){return t.onChange(e)})),s.Xb(),s.Ic(3),s.kc(4,"transloco"),s.Xb(),s.Xb()),2&e&&(s.Db(2),s.pc("checked",t.soundEnabled),s.Db(1),s.Kc(" ",s.lc(4,2,"chat.sound")," "))},directives:[Qe.a],pipes:[et.d],styles:[".root[_ngcontent-%COMP%]{padding:6px 10px 7px;color:var(--sky-ui-kit-color-text-placeholder)}"],changeDetection:0}),e}(),nt=n("W/Zz");function rt(e,t){if(1&e&&s.Tb(0,"img",5),2&e){var n=s.jc();s.pc("src",n.channel.avatarUrl,s.Ac)}}function ot(e,t){if(1&e&&(s.Yb(0,"div",6),s.Ic(1),s.Xb()),2&e){var n=s.jc();s.Db(1),s.Kc(" ",n.channel.unreadCount," ")}}var it=function(){function e(){this.select=new s.n}return e.prototype.onClick=function(){this.isCurrent||this.select.emit(this.channel)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-channel"]],inputs:{channel:"channel",isCurrent:"isCurrent"},outputs:{select:"select"},decls:6,vars:9,consts:[[1,"root",3,"click"],[1,"avatar"],["class","avatar-image","alt","",3,"src",4,"ngIf"],[1,"name",3,"title"],["class","unread-count",4,"ngIf"],["alt","",1,"avatar-image",3,"src"],[1,"unread-count"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.gc("click",(function(){return t.onClick()})),s.Yb(1,"div",1),s.Gc(2,rt,1,1,"img",2),s.Xb(),s.Yb(3,"div",3),s.Ic(4),s.Xb(),s.Gc(5,ot,2,1,"div",4),s.Xb()),2&e&&(s.Ib("-current",t.isCurrent)("-online",t.channel.isOnline),s.Db(2),s.pc("ngIf",t.channel.avatarUrl),s.Db(1),s.Fb("data-qa-id","contact-name:",t.channel.name,""),s.pc("title",t.channel.name),s.Db(1),s.Kc(" ",t.channel.name," "),s.Db(1),s.pc("ngIf",t.channel.unreadCount))},directives:[r.t],styles:['.root[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-m-fontSize);line-height:var(--sky-ui-kit-font-size-m-lineHeight);font-weight:var(--sky-ui-kit-font-size-m-fontWeight);display:flex;align-items:center;padding:6px 10px 6px 0}.root[_ngcontent-%COMP%]:hover{background-color:var(--sky-ui-kit-color-brand-backgroundHover);cursor:pointer}.root.-current[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-background-secondary);cursor:auto}.avatar[_ngcontent-%COMP%]{position:relative;margin-left:10px;width:28px;height:28px;border-radius:50%;background-color:#ddd}.root.-online[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]:after{position:absolute;right:-2px;bottom:-2px;content:" ";width:6px;height:6px;border-radius:50%;border:2px solid var(--sky-ui-kit-color-background-base);background-color:var(--sky-ui-kit-color-positive-base)}.avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;border-radius:50%}.name[_ngcontent-%COMP%]{flex:1;width:0;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.root.-current[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:var(--sky-ui-kit-font-weight-semibold)}.unread-count[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-h6-fontSize);line-height:var(--sky-ui-kit-font-size-h6-lineHeight);font-weight:var(--sky-ui-kit-font-size-h6-fontWeight);margin-left:5px;padding:0 6px;border-radius:9px;background-color:#fc6e51;color:var(--sky-ui-kit-color-text-inversed);font-weight:700}'],changeDetection:0}),e}();function at(e,t){if(1&e&&(s.Yb(0,"a",5),s.Ic(1),s.Xb()),2&e){var n=s.jc();s.Fb("data-qa-id","channel-name:",n.channel.name,""),s.pc("href",n.channel.link,s.Ac)("title",n.channel.name),s.Db(1),s.Kc(" ",n.channel.name," ")}}function st(e,t){if(1&e&&(s.Wb(0),s.Ic(1),s.Vb()),2&e){var n=s.jc();s.Db(1),s.Kc(" ",n.channel.name," ")}}function ct(e,t){1&e&&(s.Wb(0),s.Ic(1),s.kc(2,"transloco"),s.Vb()),2&e&&(s.Db(1),s.Kc(" ",s.lc(2,1,"chat.currentChannelOffline")," "))}function ut(e,t){1&e&&(s.Wb(0),s.Ic(1),s.kc(2,"transloco"),s.Vb()),2&e&&(s.Db(1),s.Kc(" ",s.lc(2,1,"chat.currentChannelOnline")," "))}function lt(e,t){if(1&e&&(s.Yb(0,"div",6),s.Tb(1,"div",7),s.Gc(2,ct,3,3,"ng-container",3),s.Gc(3,ut,3,3,"ng-container",3),s.Xb()),2&e){var n=s.jc();s.Fb("data-qa-id","online-status:",n.channel.isOnline,""),s.Db(1),s.Ib("-online",n.channel.isOnline),s.Db(1),s.pc("ngIf",!n.channel.isOnline),s.Db(1),s.pc("ngIf",n.channel.isOnline)}}var ht=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-current-channel-header"]],inputs:{channel:"channel"},decls:5,vars:3,consts:[[1,"root"],[1,"channel-name"],["class","channel-link","target","_blank",3,"href","title",4,"ngIf"],[4,"ngIf"],["class","status",4,"ngIf"],["target","_blank",1,"channel-link",3,"href","title"],[1,"status"],[1,"status-icon"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Gc(2,at,2,4,"a",2),s.Gc(3,st,2,1,"ng-container",3),s.Xb(),s.Gc(4,lt,4,5,"div",4),s.Xb()),2&e&&(s.Db(2),s.pc("ngIf",t.channel.link),s.Db(1),s.pc("ngIf",!t.channel.link),s.Db(1),s.pc("ngIf",null!==t.channel.isOnline))},directives:[r.t],pipes:[et.d],styles:[".root[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-m-fontSize);line-height:var(--sky-ui-kit-font-size-m-lineHeight);font-weight:var(--sky-ui-kit-font-size-m-fontWeight);display:flex;padding:6px 10px 7px}.channel-name[_ngcontent-%COMP%]{flex:1;width:0;padding-right:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.channel-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--sky-ui-kit-color-brand-text)}.channel-link[_ngcontent-%COMP%]:before{content:url(https://angular-widgets.skyeng.ru/profile.497a286deb9ef29115cd.svg)}.status[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--sky-ui-kit-color-text-label)}.status-icon[_ngcontent-%COMP%]{width:6px;height:6px;margin-right:3px;border-radius:50%;background-color:var(--sky-ui-kit-color-background-disabled)}.status-icon.-online[_ngcontent-%COMP%]{background-color:var(--sky-ui-kit-color-positive-base)}"],changeDetection:0}),e}(),gt=n("hOK2"),dt=n("iyfj");function ft(e,t){if(1&e&&(s.Wb(0),s.Ic(1),s.Vb()),2&e){var n=s.jc().$implicit;s.Db(1),s.Kc(" ",n.text," ")}}function pt(e,t){if(1&e&&s.Tb(0,"span",9),2&e){var n=s.jc().$implicit;s.pc("innerHTML",n.content,s.zc)}}function bt(e,t){if(1&e&&(s.Yb(0,"a",10),s.Tb(1,"img",11),s.Yb(2,"div",12),s.Yb(3,"div",13),s.Tb(4,"div",14),s.Ic(5),s.kc(6,"transloco"),s.Xb(),s.Xb(),s.Xb()),2&e){var n=s.jc().$implicit;s.pc("href",n.url,s.Ac),s.Db(1),s.pc("src",n.url,s.Ac),s.Db(4),s.Kc(" ",s.lc(6,3,"chat.openOriginalImage")," ")}}function kt(e,t){if(1&e&&(s.Yb(0,"a",15),s.Ic(1),s.Xb()),2&e){var n=s.jc().$implicit;s.pc("href",n.url,s.Ac),s.Db(1),s.Kc(" ",n.text," ")}}function vt(e,t){if(1&e&&(s.Wb(0),s.Wb(1,4),s.Gc(2,ft,2,1,"ng-container",5),s.Gc(3,pt,1,1,"span",6),s.Gc(4,bt,7,5,"a",7),s.Gc(5,kt,2,2,"a",8),s.Vb(),s.Vb()),2&e){var n=t.$implicit;s.Db(1),s.pc("ngSwitch",n.type),s.Db(1),s.pc("ngSwitchCase","text"),s.Db(1),s.pc("ngSwitchCase","html"),s.Db(1),s.pc("ngSwitchCase","image"),s.Db(1),s.pc("ngSwitchCase","link")}}var mt=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-message"]],inputs:{message:"message"},decls:5,vars:8,consts:[[1,"root"],["data-qa-id","message-content",1,"message-content"],[4,"ngFor","ngForOf"],[1,"time"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"innerHTML",4,"ngSwitchCase"],["class","image-link","target","_blank","rel","noopener",3,"href",4,"ngSwitchCase"],["class","link","target","_blank","rel","noopener",3,"href",4,"ngSwitchCase"],[3,"innerHTML"],["target","_blank","rel","noopener",1,"image-link",3,"href"],["alt","",1,"image",3,"src"],[1,"open-hint"],[1,"hint-text"],["skyWidgetsImageUrl","",1,"hint-image"],["target","_blank","rel","noopener",1,"link",3,"href"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Gc(2,vt,6,5,"ng-container",2),s.Xb(),s.Yb(3,"div",3),s.Ic(4),s.Xb(),s.Xb()),2&e&&(s.Ib("-my",t.message.isMy)("-only-image",t.message.onlyImage)("-bot",t.message.isFromBot),s.Db(2),s.pc("ngForOf",t.message.blocks),s.Db(2),s.Kc(" ",t.message.time," "))},directives:[r.s,r.x,r.y,dt.a],pipes:[et.d],styles:[".root[_ngcontent-%COMP%]{position:relative;display:flex}.root.-my[_ngcontent-%COMP%]{justify-content:flex-end}.root[_ngcontent-%COMP%]:after{position:absolute;z-index:-1;bottom:-6px}.root.-my[_ngcontent-%COMP%]:after{right:-4px;content:url(https://angular-widgets.skyeng.ru/corner-blue.2213f9340cf606cb3dcb.svg)}.root[_ngcontent-%COMP%]:not(.-my):after{left:-4px;content:url(https://angular-widgets.skyeng.ru/corner-grey.a6475547b5c6be00461f.svg)}.time[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-s-fontSize);line-height:var(--sky-ui-kit-font-size-s-lineHeight);font-weight:var(--sky-ui-kit-font-size-s-fontWeight);margin:0 0 0 4px;padding:7px 0;color:var(--sky-ui-kit-color-text-placeholder)}.root.-my[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{order:-1;margin-right:4px}.root[_ngcontent-%COMP%]:not(.-my)   .time[_ngcontent-%COMP%]{margin-left:4px}.message-content[_ngcontent-%COMP%]{max-width:190px;padding:5px 8px;word-wrap:break-word;border-radius:13px;overflow:hidden}.root.-only-image[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{padding:0}.root.-my[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#e7f2ff}.root[_ngcontent-%COMP%]:not(.-my)   .message-content[_ngcontent-%COMP%]{background-color:#f2f2f2}.root.-bot[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]     a{color:var(--sky-ui-kit-color-brand-text);text-decoration:none}.root.-bot[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]     p{margin:0;padding:4px 0}.root.-bot[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]     img{display:block;max-width:100%;margin:9px 0 6px}.image-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;height:100px}.image[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%}.root[_ngcontent-%COMP%]:not(.-only-image)   .image[_ngcontent-%COMP%]{margin:9px 0 6px}.open-hint[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-h4-fontSize);line-height:var(--sky-ui-kit-font-size-h4-lineHeight);font-weight:var(--sky-ui-kit-font-size-h4-fontWeight);display:none;position:absolute;top:0;left:0;width:100%;height:100%;align-items:center;justify-content:center;background-color:rgba(0,0,0,.3);color:var(--sky-ui-kit-color-text-inversed)}.image-link[_ngcontent-%COMP%]:hover   .open-hint[_ngcontent-%COMP%]{display:flex}.hint-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 12px 8px;border-radius:4px;background-color:rgba(0,0,0,.5);box-shadow:inset 0 -1px 0 0 rgba(0,0,0,.07);color:var(--sky-ui-kit-color-text-inversed)}.hint-image[_ngcontent-%COMP%]{width:18px;height:18px;margin-right:10px;background-image:url(https://angular-widgets.skyeng.ru/open-image.167cef8f51ab48d6b9f0.svg)}.link[_ngcontent-%COMP%]{text-decoration:none;color:var(--sky-ui-kit-color-brand-text)}"],changeDetection:0}),e}(),yt=["messagesList"];function Ct(e,t){1&e&&s.Tb(0,"sky-chat-message",5),2&e&&s.pc("message",t.$implicit)}function xt(e,t){if(1&e&&(s.Wb(0),s.Yb(1,"div",3),s.Ic(2),s.Xb(),s.Gc(3,Ct,1,1,"sky-chat-message",4),s.Vb()),2&e){var n=t.$implicit,r=s.jc();s.Db(2),s.Kc(" ",n.date," "),s.Db(1),s.pc("ngForOf",n.messages)("ngForTrackBy",r.messageTrack)}}var At=function(){function e(e){this.ngZone=e,this.loadMoreMessages=new s.n,this.historyLoading=!1}return e.prototype.ngAfterViewInit=function(){var e=this;this.ngZone.runOutsideAngular((function(){Object(U.a)(e.messagesListRef.nativeElement,"scroll").pipe(Object(gt.a)(300,void 0,{trailing:!0}),Object(f.a)((function(){return e.messagesListRef.nativeElement.scrollTop})),Object(R.a)((function(t){return t<200&&!e.allMessagesAreLoaded})),Object(k.f)(e.ngZone),Object(k.g)(e)).subscribe((function(){e.historyLoading=!0,e.loadMoreMessages.emit()}))}))},e.prototype.ngOnChanges=function(e){e.messagesGroups&&this.messagesGroups.length&&this.checkScrollPositionOnNewMessagesList()},e.prototype.ngOnDestroy=function(){},e.prototype.messageGroupTrack=function(e,t){return t.date},e.prototype.messageTrack=function(e,t){return t.addedAt},e.prototype.checkScrollPositionOnNewMessagesList=function(){var e=this;if(this.messagesListRef){var t=this.messagesListRef.nativeElement,n=t.scrollTop,r=t.scrollHeight;if(this.historyLoading){var o=r-n;window.requestAnimationFrame((function(){t.scrollTop=t.scrollHeight-o,e.historyLoading=!1}))}else n+t.getBoundingClientRect().height+100>r&&window.requestAnimationFrame((function(){t.scrollTop=t.scrollHeight}))}},e.\u0275fac=function(t){return new(t||e)(s.Sb(s.z))},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-messages-list"]],viewQuery:function(e,t){var n;1&e&&s.Ec(yt,!0,s.l),2&e&&s.wc(n=s.hc())&&(t.messagesListRef=n.first)},inputs:{messagesGroups:"messagesGroups",allMessagesAreLoaded:"allMessagesAreLoaded"},outputs:{loadMoreMessages:"loadMoreMessages"},features:[s.Bb],decls:3,vars:2,consts:[["skyUiNativeScroll","",1,"root"],["messagesList",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"date"],["class","message",3,"message",4,"ngFor","ngForOf","ngForTrackBy"],[1,"message",3,"message"]],template:function(e,t){1&e&&(s.Yb(0,"div",0,1),s.Gc(2,xt,4,3,"ng-container",2),s.Xb()),2&e&&(s.Db(2),s.pc("ngForOf",t.messagesGroups)("ngForTrackBy",t.messageGroupTrack))},directives:[nt.a,r.s,mt],styles:[".root[_ngcontent-%COMP%]{overflow:hidden;max-height:100%;box-sizing:border-box}.date[_ngcontent-%COMP%]{text-align:center;color:var(--sky-ui-kit-color-text-label)}.message[_ngcontent-%COMP%]{display:block;margin:2px 4px 2px 8px}"],changeDetection:0}),e=Object(a.__decorate)([Object(k.a)()],e)}(),wt=function(){function e(){this.message="",this.send=new s.n,this.update=new s.n}return e.prototype.updateMessage=function(e){var t=e.target.value;this.message=t,this.update.emit(t)},e.prototype.sendMessage=function(e){if(!e||!e.shiftKey){e&&e.preventDefault();var t=this.message.trim();t&&(this.send.emit(t),this.message="")}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-send-message"]],inputs:{message:"message"},outputs:{send:"send",update:"update"},decls:4,vars:6,consts:[[1,"root"],["maxlength","999","autofocus","autofocus","data-qa-id","message-placeholder",1,"text",3,"placeholder","value","input","keydown.enter"],["skyWidgetsImageUrl","","data-qa-id","btn-send-message",1,"send",3,"click"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"textarea",1),s.gc("input",(function(e){return t.updateMessage(e)}))("keydown.enter",(function(e){return t.sendMessage(e)})),s.kc(2,"transloco"),s.Xb(),s.Yb(3,"div",2),s.gc("click",(function(){return t.sendMessage()})),s.Xb(),s.Xb()),2&e&&(s.Db(1),s.pc("placeholder",s.lc(2,4,"chat.newMessagePlaceholder"))("value",t.message),s.Db(2),s.Ib("-active",!!t.message.length))},directives:[dt.a],pipes:[et.d],styles:[".root[_ngcontent-%COMP%]{position:relative;height:52px;padding-right:30px}.text[_ngcontent-%COMP%]{overflow:hidden;box-sizing:border-box;width:100%;height:100%;padding:8px;resize:none;border:0;font-family:var(--sky-ui-kit-font-family)}.text[_ngcontent-%COMP%]:active, .text[_ngcontent-%COMP%]:focus, .text[_ngcontent-%COMP%]:hover{outline:0;-webkit-appearance:none}.send[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:20px;height:16px;opacity:.35;background-image:url(https://angular-widgets.skyeng.ru/plane.a1dd983efc0e2686f797.svg)}.send.-active[_ngcontent-%COMP%]{opacity:1;cursor:pointer}"],changeDetection:0}),e}();function Ot(e,t){if(1&e){var n=s.Zb();s.Yb(0,"sky-chat-channel",8),s.gc("select",(function(e){return s.yc(n),s.jc().onChannelSelect(e)})),s.Xb()}if(2&e){var r=t.$implicit,o=s.jc();s.pc("channel",r)("isCurrent",o.isCurrentChannel(r))}}function Mt(e,t){if(1&e){var n=s.Zb();s.Yb(0,"sky-chat-messages-list",13),s.gc("loadMoreMessages",(function(){return s.yc(n),s.jc(2).onLoadMoreMessages()})),s.Xb()}if(2&e){var r=s.jc(2);s.pc("messagesGroups",r.messagesGroups)("allMessagesAreLoaded",r.allMessagesAreLoaded)}}function _t(e,t){1&e&&(s.Yb(0,"div",14),s.Ic(1),s.kc(2,"transloco"),s.Xb()),2&e&&(s.Db(1),s.Kc(" ",s.lc(2,1,"chat.emptyMessagesList")," "))}function jt(e,t){if(1&e){var n=s.Zb();s.Yb(0,"sky-chat-send-message",15),s.gc("send",(function(e){return s.yc(n),s.jc(2).onSendMessage(e)}))("update",(function(e){return s.yc(n),s.jc(2).onUpdateMessage(e)})),s.Xb()}if(2&e){var r=s.jc(2);s.pc("message",r.message)}}function Ft(e,t){if(1&e&&(s.Wb(0),s.Tb(1,"sky-chat-current-channel-header",9),s.Gc(2,Mt,1,2,"sky-chat-messages-list",10),s.Gc(3,_t,3,3,"ng-template",null,11,s.Hc),s.Gc(5,jt,1,1,"sky-chat-send-message",12),s.Vb()),2&e){var n=s.xc(4),r=s.jc();s.Db(1),s.pc("channel",r.currentChannel),s.Db(1),s.pc("ngIf",r.messagesGroups.length)("ngIfElse",n),s.Db(3),s.pc("ngIf",r.currentChannel.canSendMessages)}}function Dt(e,t){1&e&&(s.Yb(0,"div",14),s.Ic(1),s.kc(2,"transloco"),s.Xb()),2&e&&(s.Db(1),s.Kc(" ",s.lc(2,1,"chat.selectChannel")," "))}var Pt=function(){function e(){this.initialMessage="",this.selectChannel=new s.n,this.changeSoundEnabled=new s.n,this.sendMessage=new s.n,this.loadMoreMessages=new s.n,this.message=""}return e.prototype.ngOnChanges=function(e){var t;e.initialMessage&&(this.message=null!==(t=this.initialMessage)&&void 0!==t?t:"")},e.prototype.onChannelSelect=function(e){this.selectChannel.emit(e)},e.prototype.onSoundEnabledChange=function(e){this.changeSoundEnabled.emit(e)},e.prototype.channelTrack=function(e,t){return t.id},e.prototype.isCurrentChannel=function(e){return!!this.currentChannel&&e.id===this.currentChannel.id},e.prototype.onSendMessage=function(e){this.sendMessage.emit(e)},e.prototype.onLoadMoreMessages=function(){this.loadMoreMessages.emit()},e.prototype.onUpdateMessage=function(e){this.message=e},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-view"]],inputs:{channels:"channels",messagesGroups:"messagesGroups",currentChannel:"currentChannel",soundEnabled:"soundEnabled",allMessagesAreLoaded:"allMessagesAreLoaded",initialMessage:"initialMessage"},outputs:{selectChannel:"selectChannel",changeSoundEnabled:"changeSoundEnabled",sendMessage:"sendMessage",loadMoreMessages:"loadMoreMessages"},features:[s.Bb],decls:9,vars:5,consts:[[1,"root"],[1,"left-panel"],[1,"sound-setting",3,"soundEnabled","change"],["skyUiNativeScroll","",1,"channels-list"],["class","channel",3,"channel","isCurrent","select",4,"ngFor","ngForOf","ngForTrackBy"],[1,"content"],[4,"ngIf","ngIfElse"],["selectChannelNotice",""],[1,"channel",3,"channel","isCurrent","select"],[1,"channel-header",3,"channel"],["class","messages-list","data-qa-id","messages-list",3,"messagesGroups","allMessagesAreLoaded","loadMoreMessages",4,"ngIf","ngIfElse"],["emptyMessagesNotice",""],["class","send-message","data-qa-id","message-textarea",3,"message","send","update",4,"ngIf"],["data-qa-id","messages-list",1,"messages-list",3,"messagesGroups","allMessagesAreLoaded","loadMoreMessages"],[1,"notice"],["data-qa-id","message-textarea",1,"send-message",3,"message","send","update"]],template:function(e,t){if(1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"sky-chat-sound-setting",2),s.gc("change",(function(e){return t.onSoundEnabledChange(e)})),s.Xb(),s.Yb(3,"div",3),s.Gc(4,Ot,1,2,"sky-chat-channel",4),s.Xb(),s.Xb(),s.Yb(5,"div",5),s.Gc(6,Ft,6,4,"ng-container",6),s.Gc(7,Dt,3,3,"ng-template",null,7,s.Hc),s.Xb(),s.Xb()),2&e){var n=s.xc(8);s.Db(2),s.pc("soundEnabled",t.soundEnabled),s.Db(2),s.pc("ngForOf",t.channels)("ngForTrackBy",t.channelTrack),s.Db(2),s.pc("ngIf",t.currentChannel)("ngIfElse",n)}},directives:[tt,nt.a,r.s,r.t,it,ht,At,wt],pipes:[et.d],styles:[".root[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-m-fontSize);line-height:var(--sky-ui-kit-font-size-m-lineHeight);font-weight:var(--sky-ui-kit-font-size-m-fontWeight);display:flex;width:450px;height:429px;border-radius:6px;background-color:var(--sky-ui-kit-color-background-base);box-shadow:0 0 18px 3px rgba(0,0,0,.07);font-family:var(--sky-ui-kit-font-family);color:var(--sky-ui-kit-color-text-base)}.left-panel[_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:column;width:180px;border-right:1px solid var(--sky-ui-kit-color-border-base)}.sound-setting[_ngcontent-%COMP%]{border-bottom:1px solid var(--sky-ui-kit-color-border-base)}.channels-list[_ngcontent-%COMP%]{height:calc(100% - 34px);overflow:hidden}.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}.channel-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--sky-ui-kit-color-border-base)}.messages-list[_ngcontent-%COMP%]{flex:1;min-height:1px;padding:4px 0 4px 4px}.send-message[_ngcontent-%COMP%]{border-top:1px solid var(--sky-ui-kit-color-border-base)}.notice[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-s-fontSize);line-height:var(--sky-ui-kit-font-size-s-lineHeight);font-weight:var(--sky-ui-kit-font-size-s-fontWeight);display:flex;height:100%;justify-content:center;align-items:center;text-align:center;color:var(--sky-ui-kit-color-text-placeholder)}"],changeDetection:0}),e}(),Et=n("MXMq");function Bt(e,t){if(1&e&&(s.Yb(0,"div",3),s.Ic(1),s.Xb()),2&e){var n=s.jc();s.Db(1),s.Kc(" ",n.unreadCount," ")}}var St=n("ZxVr"),Rt=function(){function e(){this.iconSvg=St}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-icon"]],inputs:{unreadCount:"unreadCount",isActive:"isActive",isInversed:"isInversed"},decls:3,vars:6,consts:[[1,"root"],[1,"icon",3,"svgContent"],["class","unread-count","data-qa-id","unread-count",4,"ngIf"],["data-qa-id","unread-count",1,"unread-count"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Tb(1,"sky-ui-icon",1),s.Gc(2,Bt,2,1,"div",2),s.Xb()),2&e&&(s.Ib("-active",t.isActive)("-inversed",t.isInversed),s.Db(1),s.pc("svgContent",t.iconSvg),s.Db(1),s.pc("ngIf",t.unreadCount))},directives:[Et.a,r.t],styles:[".root[_ngcontent-%COMP%]{position:relative;cursor:pointer}.icon[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]{width:24px;height:24px}.icon[_ngcontent-%COMP%]{display:block;fill:#98acc6;opacity:.64}.root[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{opacity:1}.root.-active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1}.root.-active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .root.-inversed[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{fill:var(--sky-ui-kit-color-text-inversed)}.unread-count[_ngcontent-%COMP%]{font-size:var(--sky-ui-kit-font-size-h6-fontSize);line-height:var(--sky-ui-kit-font-size-h6-lineHeight);font-weight:var(--sky-ui-kit-font-size-h6-fontWeight);position:absolute;top:-5px;right:-5px;padding:0 6px;border-radius:9px;background-color:#fc6e51;color:var(--sky-ui-kit-color-text-inversed);font-weight:700}"],changeDetection:0}),e}(),zt=["chatIcon"];function Tt(e,t){if(1&e){var n=s.Zb();s.Wb(0),s.Yb(1,"div",4),s.gc("click",(function(){return s.yc(n),s.jc().toggle()})),s.Xb(),s.Yb(2,"div",5),s.Tb(3,"div",6),s.Yb(4,"sky-chat-view",7),s.gc("changeSoundEnabled",(function(e){return s.yc(n),s.jc().changeSoundEnabled(e)}))("selectChannel",(function(e){return s.yc(n),s.jc().selectChannel(e)}))("sendMessage",(function(e){return s.yc(n),s.jc().sendMessage(e)}))("loadMoreMessages",(function(){return s.yc(n),s.jc().loadMoreMessages()})),s.kc(5,"async"),s.kc(6,"async"),s.kc(7,"async"),s.kc(8,"async"),s.kc(9,"async"),s.kc(10,"async"),s.Xb(),s.Xb(),s.Vb()}if(2&e){var r=s.jc();s.Db(2),s.Fc("left",r.chatContainerLeftPx,"px"),s.Db(1),s.Fc("left",r.pointerLeftPx,"px"),s.Db(1),s.pc("channels",s.lc(5,10,r.channels$))("soundEnabled",s.lc(6,12,r.soundEnabled$))("currentChannel",s.lc(7,14,r.currentChannel$))("messagesGroups",s.lc(8,16,r.messagesGroups$))("allMessagesAreLoaded",s.lc(9,18,r.allMessagesAreLoaded$))("initialMessage",s.lc(10,20,r.initialMessage$))}}var Lt=function(){function e(e,t,n,r,o,i,a,s,c){this.chatSoundService=o,this.chatChannelService=i,this.chatMessageService=a,this.ngZone=s,this.changeDetectorRef=c,this.isActive=new Z.a(!1),this.isActive$=this.isActive.asObservable(),this.chatContainerLeftPx=0,this.pointerLeftPx=0,this.soundEnabled$=this.chatSoundService.store$.select("soundEnabled"),this.unreadCount$=this.chatChannelService.unreadCount$,this.currentChannel$=this.chatChannelService.currentChannel$,this.messagesGroups$=this.chatMessageService.messagesGroups$,this.allMessagesAreLoaded$=this.chatMessageService.allMessagesAreLoaded$,this.iconIsInversed=!1}return e.prototype.ngOnInit=function(){var e=this;this.channels$=this.chatChannelService.store$.select("channels").pipe(Object(f.a)((function(t){return e.sortChannels(t)}))),this.ngZone.runOutsideAngular((function(){Object(U.a)(document,"keyup").pipe(Object(g.a)(e.isActive$),Object(R.a)((function(e){var t=Object(a.__read)(e,2);return t[1]&&t[0].which===Je.a.escape})),Object(k.f)(e.ngZone),Object(k.g)(e)).subscribe((function(){return e.toggle()}))})),this.initialMessage$=Object(U.a)(window,"chat.openSupportChannel").pipe(Object(f.a)((function(e){return e.detail}))).pipe(Object(p.a)(1),Object(b.a)()),this.initialMessage$.pipe(Object(f.a)((function(){return e.getSupportChannel()})),Object(k.d)(),Object(k.g)(this)).subscribe((function(t){e.selectChannel(t),e.toggle()}))},e.prototype.ngOnChanges=function(e){e.darkBackground&&(this.iconIsInversed="true"===this.darkBackground,this.changeDetectorRef.markForCheck())},e.prototype.ngOnDestroy=function(){},e.prototype.getSupportChannel=function(){return this.chatChannelService.store$.get("channels")[-11]},e.prototype.toggle=function(){var e=!this.isActive.getValue();this.isActive.next(e),e?this.updateChatPosition():this.chatChannelService.setCurrentChannelId(null)},e.prototype.changeSoundEnabled=function(e){this.chatSoundService.setSoundEnabled(e)},e.prototype.selectChannel=function(e){this.chatChannelService.setCurrentChannelId(e.id)},e.prototype.sendMessage=function(e){this.chatMessageService.sendMessage(e)},e.prototype.loadMoreMessages=function(){this.chatMessageService.loadMoreMessages()},e.prototype.updateChatPosition=function(){var e=this.chatIconRef.nativeElement.getBoundingClientRect();this.chatContainerLeftPx=e.width/2-225,this.pointerLeftPx=225,e.left<-this.chatContainerLeftPx&&(this.chatContainerLeftPx=-e.left,this.pointerLeftPx=e.left+e.width/2)},e.prototype.sortChannels=function(e){return V()(e,[function(e){return e.id<=0},function(e){return e.unreadCount>0?1:0},"updatedAt"],["desc","desc","desc"])},e.\u0275fac=function(t){return new(t||e)(s.Sb(qe),s.Sb(Ye),s.Sb(Ze),s.Sb(Ke),s.Sb(X),s.Sb(Y),s.Sb(He),s.Sb(s.z),s.Sb(s.h))},e.\u0275cmp=s.Mb({type:e,selectors:[["sky-chat-widget"]],viewQuery:function(e,t){var n;1&e&&(s.Pc(zt,!0,s.l),s.Pc(Pt,!0)),2&e&&(s.wc(n=s.hc())&&(t.chatIconRef=n.first),s.wc(n=s.hc())&&(t.chatViewComponent=n.first))},inputs:{darkBackground:"darkBackground"},features:[s.Bb],decls:8,vars:14,consts:[[1,"root"],[3,"isActive","unreadCount","isInversed","click"],["chatIcon",""],[4,"ngIf"],[1,"background",3,"click"],[1,"chat-container"],[1,"pointer"],[3,"channels","soundEnabled","currentChannel","messagesGroups","allMessagesAreLoaded","initialMessage","changeSoundEnabled","selectChannel","sendMessage","loadMoreMessages"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.kc(1,"async"),s.Yb(2,"sky-chat-icon",1,2),s.gc("click",(function(){return t.toggle()})),s.kc(4,"async"),s.kc(5,"async"),s.Xb(),s.Gc(6,Tt,11,22,"ng-container",3),s.kc(7,"async"),s.Xb()),2&e&&(s.Ib("-active",s.lc(1,6,t.isActive$)),s.Db(2),s.pc("isActive",s.lc(4,8,t.isActive$))("unreadCount",s.lc(5,10,t.unreadCount$))("isInversed",t.iconIsInversed),s.Db(4),s.pc("ngIf",s.lc(7,12,t.isActive$)))},directives:[Rt,r.t,Pt],pipes:[r.b],styles:[".root[_ngcontent-%COMP%]{--sky-ui-kit-color-text-base:#242d34;--sky-ui-kit-color-text-secondary:#50575c;--sky-ui-kit-color-text-label:#73797d;--sky-ui-kit-color-text-placeholder:#969b9e;--sky-ui-kit-color-text-inversed:#fff;--sky-ui-kit-color-text-inversedSecondary:#dadada;--sky-ui-kit-color-text-baseRgb:36,45,52;--sky-ui-kit-color-text-secondaryRgb:80,87,92;--sky-ui-kit-color-text-labelRgb:115,121,125;--sky-ui-kit-color-text-placeholderRgb:150,155,158;--sky-ui-kit-color-text-inversedRgb:255,255,255;--sky-ui-kit-color-text-inversedSecondaryRgb:218,218,218;--sky-ui-kit-color-background-base:#fff;--sky-ui-kit-color-background-secondary:#e3e7eb;--sky-ui-kit-color-background-disabled:#93999f;--sky-ui-kit-color-background-baseRgb:255,255,255;--sky-ui-kit-color-background-secondaryRgb:227,231,235;--sky-ui-kit-color-background-disabledRgb:147,153,159;--sky-ui-kit-color-border-base:#e3e7eb;--sky-ui-kit-color-border-baseRgb:227,231,235;--sky-ui-kit-color-brand-text:#4287df;--sky-ui-kit-color-brand-base:#5d9cec;--sky-ui-kit-color-brand-background:#e5effc;--sky-ui-kit-color-brand-backgroundHover:#f2f7fd;--sky-ui-kit-color-brand-backgroundActive:#e5effc;--sky-ui-kit-color-brand-lighten5:#74aaef;--sky-ui-kit-color-brand-darken5:#468ee9;--sky-ui-kit-color-brand-lighten20:#b8d4f7;--sky-ui-kit-color-brand-textRgb:66,135,223;--sky-ui-kit-color-brand-baseRgb:93,156,236;--sky-ui-kit-color-brand-backgroundRgb:229,239,252;--sky-ui-kit-color-brand-backgroundHoverRgb:242,247,253;--sky-ui-kit-color-brand-backgroundActiveRgb:229,239,252;--sky-ui-kit-color-brand-lighten5Rgb:116,170,239;--sky-ui-kit-color-brand-darken5Rgb:70,142,233;--sky-ui-kit-color-brand-lighten20Rgb:184,212,247;--sky-ui-kit-color-positive-text:#55a900;--sky-ui-kit-color-positive-base:#8cc152;--sky-ui-kit-color-positive-background:#edf5e3;--sky-ui-kit-color-positive-backgroundHover:#f6faf1;--sky-ui-kit-color-positive-backgroundActive:#edf5e3;--sky-ui-kit-color-positive-lighten5:#98c865;--sky-ui-kit-color-positive-darken5:#7fb842;--sky-ui-kit-color-positive-lighten20:#bedc9d;--sky-ui-kit-color-positive-textRgb:85,169,0;--sky-ui-kit-color-positive-baseRgb:140,193,82;--sky-ui-kit-color-positive-backgroundRgb:237,245,227;--sky-ui-kit-color-positive-backgroundHoverRgb:246,250,241;--sky-ui-kit-color-positive-backgroundActiveRgb:237,245,227;--sky-ui-kit-color-positive-lighten5Rgb:152,200,101;--sky-ui-kit-color-positive-darken5Rgb:127,184,66;--sky-ui-kit-color-positive-lighten20Rgb:190,220,157;--sky-ui-kit-color-accent-text:#ff255d;--sky-ui-kit-color-accent-base:#ff3d6f;--sky-ui-kit-color-accent-background:#ffe0e8;--sky-ui-kit-color-accent-backgroundHover:#ffeff3;--sky-ui-kit-color-accent-backgroundActive:#ffe0e8;--sky-ui-kit-color-accent-lighten5:#ff5782;--sky-ui-kit-color-accent-darken5:#ff245c;--sky-ui-kit-color-accent-lighten20:#ffa3bb;--sky-ui-kit-color-accent-textRgb:255,37,93;--sky-ui-kit-color-accent-baseRgb:255,61,111;--sky-ui-kit-color-accent-backgroundRgb:255,224,232;--sky-ui-kit-color-accent-backgroundHoverRgb:255,239,243;--sky-ui-kit-color-accent-backgroundActiveRgb:255,224,232;--sky-ui-kit-color-accent-lighten5Rgb:255,87,130;--sky-ui-kit-color-accent-darken5Rgb:255,36,92;--sky-ui-kit-color-accent-lighten20Rgb:255,163,187;--sky-ui-kit-color-wrong-text:#fe4f44;--sky-ui-kit-color-wrong-base:#f66;--sky-ui-kit-color-wrong-background:#ffe7e7;--sky-ui-kit-color-wrong-backgroundHover:#fff3f3;--sky-ui-kit-color-wrong-backgroundActive:#ffe7e7;--sky-ui-kit-color-wrong-lighten5:#ff8080;--sky-ui-kit-color-wrong-darken5:#ff4d4d;--sky-ui-kit-color-wrong-lighten20:#fcc;--sky-ui-kit-color-wrong-textRgb:254,79,68;--sky-ui-kit-color-wrong-baseRgb:255,102,102;--sky-ui-kit-color-wrong-backgroundRgb:255,231,231;--sky-ui-kit-color-wrong-backgroundHoverRgb:255,243,243;--sky-ui-kit-color-wrong-backgroundActiveRgb:255,231,231;--sky-ui-kit-color-wrong-lighten5Rgb:255,128,128;--sky-ui-kit-color-wrong-darken5Rgb:255,77,77;--sky-ui-kit-color-wrong-lighten20Rgb:255,204,204;--sky-ui-kit-font-family:Open Sans,Arial,sans-serif;--sky-ui-kit-font-weight-semibold:600;--sky-ui-kit-font-size-h1-fontSize:28px;--sky-ui-kit-font-size-h1-lineHeight:40px;--sky-ui-kit-font-size-h1-fontWeight:400;--sky-ui-kit-font-size-h2-fontSize:24px;--sky-ui-kit-font-size-h2-lineHeight:34px;--sky-ui-kit-font-size-h2-fontWeight:400;--sky-ui-kit-font-size-h3-fontSize:18px;--sky-ui-kit-font-size-h3-lineHeight:26px;--sky-ui-kit-font-size-h3-fontWeight:600;--sky-ui-kit-font-size-h4-fontSize:16px;--sky-ui-kit-font-size-h4-lineHeight:24px;--sky-ui-kit-font-size-h4-fontWeight:600;--sky-ui-kit-font-size-h5-fontSize:14px;--sky-ui-kit-font-size-h5-lineHeight:20px;--sky-ui-kit-font-size-h5-fontWeight:600;--sky-ui-kit-font-size-h6-fontSize:12px;--sky-ui-kit-font-size-h6-lineHeight:18px;--sky-ui-kit-font-size-h6-fontWeight:600;--sky-ui-kit-font-size-xl-fontSize:18px;--sky-ui-kit-font-size-xl-lineHeight:26px;--sky-ui-kit-font-size-xl-fontWeight:400;--sky-ui-kit-font-size-l-fontSize:16px;--sky-ui-kit-font-size-l-lineHeight:24px;--sky-ui-kit-font-size-l-fontWeight:400;--sky-ui-kit-font-size-m-fontSize:14px;--sky-ui-kit-font-size-m-lineHeight:20px;--sky-ui-kit-font-size-m-fontWeight:400;--sky-ui-kit-font-size-s-fontSize:12px;--sky-ui-kit-font-size-s-lineHeight:18px;--sky-ui-kit-font-size-s-fontWeight:400;position:relative;z-index:140}.background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:-1}.chat-container[_ngcontent-%COMP%]{position:absolute;top:40px}.pointer[_ngcontent-%COMP%]{position:absolute;top:5px;left:calc(50% - 5px);width:10px;height:10px;margin-top:-10px;margin-left:-5px;transform:rotate(-45deg);background:var(--sky-ui-kit-color-background-base)}"],changeDetection:0}),e=Object(a.__decorate)([Object(k.a)()],e)}(),It=n("4J9Q");function Ut(){return n("g6RX")}n.d(t,"en",(function(){return Ut})),n.d(t,"ChatWidgetModule",(function(){return Nt}));var $t=[{selector:"sky-chat-widget",component:Lt}],Nt=function(){function e(){}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},providers:[Y,qe,B,He,Ke,Ye,Ze,X,E,Object(o.k)($t),Object(It.a)("chat",{en:Ut})],imports:[[r.c,i.p,i.i,et.c,o.c,i.d]]}),e}()},EI7Z:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},FaiA:function(e,t){e.exports=function(e,t){return e>t}},H87J:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},"JBn+":function(e,t,n){var r=n("hyzI"),o=n("qjF7"),i=n("cEmw");function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},JYmt:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},JcJ6:function(e,t,n){var r=n("Syyo"),o=n("H87J"),i=n("wxYD"),a=n("a88S"),s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},"KAo/":function(e,t,n){var r=n("NYSw"),o=n("2srY"),i=n("NW/2"),a=n("i7nn"),s=n("+tCn"),c=n("0Ss3"),u=n("Ypsa");e.exports=function(e,t){return a(e)&&s(t)?c(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,3)}}},"LPC+":function(e,t,n){var r=n("JElN"),o=n("FaiA"),i=n("zWgn");e.exports=function(e){return e&&e.length?r(e,i,o):void 0}},"NW/2":function(e,t,n){var r=n("JYmt"),o=n("z+TE");e.exports=function(e,t){return null!=e&&o(e,t,r)}},NYSw:function(e,t,n){var r=n("BqUW"),o=n("tLQN");e.exports=function e(t,n,i,a,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,s))}},Q4oW:function(e,t,n){var r=n("zKkv"),o=n("bz5b")(r);e.exports=o},R3gn:function(e,t,n){var r=n("Syyo"),o=n("mGzy"),i=n("pPzx"),a=n("ZZ+W"),s=n("aURW"),c=n("XlL0"),u=r?r.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,g){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":if(d||(d=c),e.size!=t.size&&!(1&r))return!1;var f=g.get(e);if(f)return f==t;r|=2,g.set(e,t);var p=a(d(e),d(t),r,u,h,g);return g.delete(e),p;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},S0iI:function(e,t){e.exports=function(e,t){return e.has(t)}},S3pA:function(e,t,n){var r=n("7/we"),o=n("KAo/"),i=n("zWgn"),a=n("wxYD"),s=n("1EDM");e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},SoOq:function(e,t,n){var r=n("0+aC"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},XlL0:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},Ypsa:function(e,t,n){var r=n("a88S");e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},"ZZ+W":function(e,t,n){var r=n("JBn+"),o=n("myUI"),i=n("S0iI");e.exports=function(e,t,n,a,s,c){var u=1&n,l=e.length,h=t.length;if(l!=h&&!(u&&h>l))return!1;var g=c.get(e);if(g&&c.get(t))return g==t;var d=-1,f=!0,p=2&n?new r:void 0;for(c.set(e,t),c.set(t,e);++d<l;){var b=e[d],k=t[d];if(a)var v=u?a(k,b,d,t,e,c):a(b,k,d,e,t,c);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!o(t,(function(e,t){if(!i(p,t)&&(b===e||s(b,e,n,a,c)))return p.push(t)}))){f=!1;break}}else if(b!==k&&!s(b,k,n,a,c)){f=!1;break}}return c.delete(e),c.delete(t),f}},ZjRn:function(e,t,n){var r=n("HsnV"),o=n("NYSw");e.exports=function(e,t,n,i){var a=n.length,s=a,c=!i;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var l=(u=n[a])[0],h=e[l],g=u[1];if(c&&u[2]){if(void 0===h&&!(l in e))return!1}else{var d=new r;if(i)var f=i(h,g,l,e,t,d);if(!(void 0===f?o(g,h,3,i,d):f))return!1}}return!0}},ZxVr:function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><mask id="chat-icon" fill="#fff"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12C23 17.5228 18.0751 22 12 22C10.4494 22 8.97379 21.7083 7.63584 21.1821L3.67125 23.1644C2.95688 23.5216 2.1327 22.9384 2.23176 22.1459L2.81239 17.5009C1.66681 15.9228 1 14.0322 1 12C1 6.47715 5.92487 2 12 2C18.0751 2 23 6.47715 23 12Z"/></mask><path d="M7.63584 21.1821L8.36792 19.3209L7.53855 18.9947L6.74141 19.3932L7.63584 21.1821ZM3.67125 23.1644L4.56568 24.9532H4.56568L3.67125 23.1644ZM2.23176 22.1459L0.247205 21.8978L2.23176 22.1459ZM2.81239 17.5009L4.79694 17.749L4.89491 16.9652L4.43089 16.326L2.81239 17.5009ZM12 24C18.9961 24 25 18.8025 25 12H21C21 16.2432 17.1542 20 12 20V24ZM6.90377 23.0433C8.4739 23.6609 10.1978 24 12 24V20C10.7011 20 9.47368 19.7558 8.36792 19.3209L6.90377 23.0433ZM6.74141 19.3932L2.77682 21.3755L4.56568 24.9532L8.53027 22.9709L6.74141 19.3932ZM2.77682 21.3755C3.4912 21.0183 4.31538 21.6015 4.21632 22.394L0.247205 21.8978C-0.0499918 24.2754 2.42255 26.0248 4.56568 24.9532L2.77682 21.3755ZM4.21632 22.394L4.79694 17.749L0.827831 17.2528L0.247205 21.8978L4.21632 22.394ZM-1 12C-1 14.481 -0.183501 16.7784 1.19388 18.6758L4.43089 16.326C3.51713 15.0672 3 13.5834 3 12H-1ZM12 0C5.00395 0 -1 5.19747 -1 12H3C3 7.75683 6.84579 4 12 4V0ZM25 12C25 5.19747 18.9961 0 12 0V4C17.1542 4 21 7.75683 21 12H25Z" mask="url(#chat-icon)"/></svg>'},a88S:function(e,t,n){var r=n("Dhk8"),o=n("tLQN");e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},aURW:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},bFjY:function(e,t,n){var r=n("Q4oW"),o=n("9y2L");e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}},bz5b:function(e,t,n){var r=n("9y2L");e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},cEmw:function(e,t){e.exports=function(e){return this.__data__.has(e)}},"dnX/":function(e,t,n){var r=n("a88S");e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,i=e==e,a=r(e),s=void 0!==t,c=null===t,u=t==t,l=r(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||o&&s&&u||!n&&u||!i)return 1;if(!o&&!a&&!l&&e<t||l&&n&&i&&!o&&!a||c&&n&&i||!s&&i||!u)return-1}return 0}},dw5g:function(e,t,n){var r=n("JcJ6");e.exports=function(e){return null==e?"":r(e)}},eHpp:function(e,t,n){var r=n("H87J"),o=n("S3pA"),i=n("bFjY"),a=n("4jPf"),s=n("SU8Q"),c=n("5WP5"),u=n("zWgn");e.exports=function(e,t,n){var l=-1;t=r(t.length?t:[u],s(o));var h=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++l,value:e}}));return a(h,(function(e,t){return c(e,t,n)}))}},g6RX:function(e){e.exports=JSON.parse('{"emptyMessagesList":"Your chat messages and history will be displayed here.","selectChannel":"Please select a dialog","openOriginalImage":"Open original","sound":"Sound","currentChannelOnline":"Online","currentChannelOffline":"Offline","newMessagePlaceholder":"Write your text here..."}')},hMsr:function(e,t,n){var r=n("+tCn"),o=n("BlJA");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},i7nn:function(e,t,n){var r=n("wxYD"),o=n("a88S"),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},myUI:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},nYym:function(e,t,n){"use strict";var r;!function(o){if("function"!=typeof i){var i=function(e){return e};i.nonNative=!0}const a=i("plaintext"),s=i("html"),c=i("comment"),u=/<(\w*)>/g,l=/<\/?([^\s\/>]+)/;function h(e,t,n){return d(e=e||"",g(t=t||[],n=n||""))}function g(e,t){return{allowable_tags:e=function(e){let t=new Set;if("string"==typeof e){let n;for(;n=u.exec(e);)t.add(n[1])}else i.nonNative||"function"!=typeof e[i.iterator]?"function"==typeof e.forEach&&e.forEach(t.add,t):t=new Set(e);return t}(e),tag_replacement:t,state:a,tag_buffer:"",depth:0,in_quote_char:""}}function d(e,t){let n=t.allowable_tags,r=t.tag_replacement,o=t.state,i=t.tag_buffer,u=t.depth,l=t.in_quote_char,h="";for(let g=0,d=e.length;g<d;g++){let t=e[g];if(o===a)switch(t){case"<":o=s,i+=t;break;default:h+=t}else if(o===s)switch(t){case"<":if(l)break;u++;break;case">":if(l)break;if(u){u--;break}l="",o=a,i+=">",n.has(f(i))?h+=i:h+=r,i="";break;case'"':case"'":l=t===l?"":l||t,i+=t;break;case"-":"<!-"===i&&(o=c),i+=t;break;case" ":case"\n":if("<"===i){o=a,h+="< ",i="";break}i+=t;break;default:i+=t}else if(o===c)switch(t){case">":"--"==i.slice(-2)&&(o=a),i="";break;default:i+=t}}return t.state=o,t.tag_buffer=i,t.depth=u,t.in_quote_char=l,h}function f(e){let t=l.exec(e);return t?t[1].toLowerCase():null}h.init_streaming_mode=function(e,t){let n=g(e=e||[],t=t||"");return function(e){return d(e||"",n)}},void 0===(r=(function(){return h}).call(t,n,t,e))||(e.exports=r)}()},pFSi:function(e,t,n){var r=n("hyzI");function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},qjF7:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},w2Tz:function(e,t,n){var r=n("xoyU"),o=n("Ypsa");e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},xoyU:function(e,t,n){var r=n("wxYD"),o=n("i7nn"),i=n("SoOq"),a=n("dw5g");e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},yZHP:function(e,t,n){var r=n("tlBq"),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,s){var c=1&n,u=r(e),l=u.length;if(l!=r(t).length&&!c)return!1;for(var h=l;h--;){var g=u[h];if(!(c?g in t:o.call(t,g)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var f=!0;s.set(e,t),s.set(t,e);for(var p=c;++h<l;){var b=e[g=u[h]],k=t[g];if(i)var v=c?i(k,b,g,t,e,s):i(b,k,g,e,t,s);if(!(void 0===v?b===k||a(b,k,n,i,s):v)){f=!1;break}p||(p="constructor"==g)}if(f&&!p){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(f=!1)}return s.delete(e),s.delete(t),f}},"z+TE":function(e,t,n){var r=n("xoyU"),o=n("bvyN"),i=n("wxYD"),a=n("pnw1"),s=n("t0L4"),c=n("Ypsa");e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,h=!1;++u<l;){var g=c(t[u]);if(!(h=null!=e&&n(e,g)))break;e=e[g]}return h||++u!=l?h:!!(l=null==e?0:e.length)&&s(l)&&a(g,l)&&(i(e)||o(e))}},zKkv:function(e,t,n){var r=n("UdtX"),o=n("BlJA");e.exports=function(e,t){return e&&r(e,t,o)}}}]);
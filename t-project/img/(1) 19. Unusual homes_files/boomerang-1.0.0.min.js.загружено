/*
 * Copyright (c) 2011, Yahoo! Inc.  All rights reserved.
 * Copyright (c) 2011-2012, Log-Normal, Inc.  All rights reserved.
 * Copyright (c) 2012-2017, SOASTA, Inc. All rights reserved.
 * Copyright (c) 2017, Akamai Technologies, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms.
 */
/* JavaScript MD5 1.0.1 Copyright 2011, Sebastian Tschan. Licensed under the MIT license. */
/* Boomerang Version: 1.0.0 01d3ceff4c9157c300a5699c5b55ede23e27674b */

function BOOMR_check_doc_domain(a){if(window){if(!a){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(b){BOOMR.isCrossOriginError(b)||BOOMR.addError(b,"BOOMR_check_doc_domain.domainFix")}a=document.domain}if(-1!==a.indexOf(".")){try{window.parent.document;return}catch(b){document.domain=a}try{window.parent.document;return}catch(b){a=a.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(a)}}}BOOMR_start=(new Date).getTime();BOOMR_check_doc_domain();!function(a){var b,c,d,e,f,g,h,i=a;a.parent!==a&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(a=a.parent);d=a.document;a.BOOMR||(a.BOOMR={});BOOMR=a.BOOMR;if(!BOOMR.version){BOOMR.version="1.0.0";BOOMR.window=a;BOOMR.boomerang_frame=i;BOOMR.plugins||(BOOMR.plugins={});!function(){try{void 0!==new a.CustomEvent("CustomEvent")&&(e=function(b,c){return new a.CustomEvent(b,c)})}catch(b){}try{!e&&d.createEvent&&d.createEvent("CustomEvent")&&(e=function(a,b){var c=d.createEvent("CustomEvent");b=b||{cancelable:!1,bubbles:!1};c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c})}catch(b){}!e&&d.createEventObject&&(e=function(a,b){var c=d.createEventObject();c.type=c.propertyName=a;c.detail=b.detail;return c});e||(e=function(){})}();f=function(a,b,c){function f(){try{d.dispatchEvent?d.dispatchEvent(g):d.fireEvent&&d.fireEvent("onpropertychange",g)}catch(b){BOOMR.debug("Error when dispatching "+a)}}var g=e(a,{detail:b});g&&(c?BOOMR.setImmediate(f):f())};if(void 0!==d.hidden){g="visibilityState";h="visibilitychange"}else if(void 0!==d.mozHidden){g="mozVisibilityState";h="mozvisibilitychange"}else if(void 0!==d.msHidden){g="msVisibilityState";h="msvisibilitychange"}else if(void 0!==d.webkitHidden){g="webkitVisibilityState";h="webkitvisibilitychange"}b={beacon_url:"",beacon_send_externally:!1,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:void 0,site_domain:a.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:void 0,r2:void 0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],xhr_send:[],xhr_error:[],error:[],xhr_send:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",xb_handler:function(c){return function(d){var e;d||(d=a.event);d.target?e=d.target:d.srcElement&&(e=d.srcElement);3===e.nodeType&&(e=e.parentNode);e&&e.nodeName&&"OBJECT"===e.nodeName.toUpperCase()&&"application/x-shockwave-flash"===e.type||b.fireEvent(c,e)}},clearEvents:function(){var a;for(a in this.events)this.events.hasOwnProperty(a)&&(this.events[a]=[])},clearListeners:function(){var a;for(a in b.listenerCallbacks)if(b.listenerCallbacks.hasOwnProperty(a))for(;b.listenerCallbacks[a].length;)BOOMR.utils.removeListener(b.listenerCallbacks[a][0].el,a,b.listenerCallbacks[a][0].fn);b.listenerCallbacks={}},fireEvent:function(a,b){var c,d,e,g;a=a.toLowerCase();this.translate_events[a]&&(a=this.translate_events[a]);if(this.events.hasOwnProperty(a)){this.public_events.hasOwnProperty(a)&&f(this.public_events[a],b);e=this.events[a];"before_beacon"!==a&&"beacon"!==a&&BOOMR.real_sendBeacon();g=e.length;for(c=0;c<g;c++)try{d=e[c];d.fn.call(d.scope,b,d.cb_data)}catch(h){BOOMR.addError(h,"fireEvent."+a+"<"+c+">")}for(c=0;c<g;c++)if(e[c].once){e.splice(c,1);g--;c--}}},spaNavigation:function(){b.onloadfired=!0},beaconUrlAllowed:function(a){if(!b.beacon_urls_allowed||0===b.beacon_urls_allowed.length)return!0;for(var c=0;c<b.beacon_urls_allowed.length;c++){if(new RegExp(b.beacon_urls_allowed[c]).exec(a))return!0}return!1},checkLocalStorageSupport:function(){var c=b.LOCAL_STORAGE_PREFIX+"clss";b.localStorageSupported=!1;try{if(!a.JSON||!a.localStorage)return;a.localStorage.setItem(c,c);b.localStorageSupported=a.localStorage.getItem(c)===c;a.localStorage.removeItem(c)}catch(d){b.localStorageSupported=!1}}};c={t_start:BOOMR_start,t_end:void 0,url:"",loadedLate:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},utils:{hasPostMessageSupport:function(){return!(!a.postMessage||"function"!=typeof a.postMessage&&"object"!=typeof a.postMessage)},objectToString:function(a,b,c){var d,e=[];if(!a||"object"!=typeof a)return a;void 0===b&&(b="\n\t");c||(c=0);if(BOOMR.utils.isArray(a)){for(d=0;d<a.length;d++)c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(this.objectToString(a[d],b+("\n\t"===b?"\t":""),c-1)):"&"===b?e.push(encodeURIComponent(a[d])):e.push(a[d]);b=","}else for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(encodeURIComponent(d)+"="+this.objectToString(a[d],b+("\n\t"===b?"\t":""),c-1)):"&"===b?e.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d])):e.push(d+"="+a[d]));return e.join(b)},getCookie:function(a){if(!a)return null;a=" "+a+"=";var b,c;c=" "+d.cookie+";";if((b=c.indexOf(a))>=0){b+=a.length;c=c.substring(b,c.indexOf(";",b)).replace(/^"/,"").replace(/"$/,"");return c}},setCookie:function(a,c,e){var f,g,h,i,j;if(!a||!b.site_domain||void 0===c){BOOMR.debug("Invalid parameters or site domain: "+a+"/"+c+"/"+b.site_domain);BOOMR.addVar("nocookie",1);return!1}f=this.objectToString(c,"&");g=a+'="'+f+'"';if(g.length<500){i=[g,"path=/","domain="+b.site_domain];if("number"==typeof e){j=new Date;j.setTime(j.getTime()+1e3*e);j=j.toGMTString();i.push("expires="+j)}d.cookie=i.join("; ");h=this.getCookie(a);if(f===h||void 0===h&&"number"==typeof e&&e<=0)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+f+"\n"+h)}else BOOMR.warn("Cookie too long: "+g.length+" "+g);BOOMR.addVar("nocookie",1);return!1},getSubCookies:function(a){var b,c,d,e,f=!1,g={};if(!a)return null;if("string"!=typeof a){BOOMR.debug("TypeError: cookie is not a string: "+typeof a);return null}b=a.split("&");for(c=0,d=b.length;c<d;c++){e=b[c].split("=");if(e[0]){e.push("");g[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);f=!0}}return f?g:null},removeCookie:function(a){return this.setCookie(a,{},-86400)},getLocalStorage:function(c){var d,e;if(!c||!b.localStorageSupported)return null;try{d=a.localStorage.getItem(b.LOCAL_STORAGE_PREFIX+c);if(null===d)return;e=a.JSON.parse(d)}catch(f){BOOMR.warn(f);return null}if(!e||"object"!=typeof e.items){this.removeLocalStorage(c);return null}if(!("number"==typeof e.expires&&BOOMR.now()>=e.expires))return e.items;this.removeLocalStorage(c)},setLocalStorage:function(c,d,e){var f,g,h;if(!c||!b.localStorageSupported||"object"!=typeof d)return!1;f={items:d};"number"==typeof e&&(f.expires=BOOMR.now()+1e3*e);g=a.JSON.stringify(f);if(g.length<5e4){try{a.localStorage.setItem(b.LOCAL_STORAGE_PREFIX+c,g);h=a.localStorage.getItem(b.LOCAL_STORAGE_PREFIX+c);if(g===h)return!0}catch(i){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+g+"\n"+h)}else BOOMR.warn("Storage items too large: "+g.length+" "+g);return!1},removeLocalStorage:function(c){if(!c||!b.localStorageSupported)return!1;try{a.localStorage.removeItem(b.LOCAL_STORAGE_PREFIX+c);return!0}catch(d){}return!1},cleanupURL:function(a,c){if(!a||BOOMR.utils.isArray(a))return"";b.strip_query_string&&(a=a.replace(/\?.*/,"?qs-redacted"));if(void 0!==c&&a&&a.length>c){var d=a.indexOf("?");a=-1!==d&&d<c?a.substr(0,d)+"?...":a.substr(0,c-3)+"..."}return a},hashQueryString:function(a,b){if(!a)return a;if(!a.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof a);return""}a.match(/^\/\//)&&(a=location.protocol+a);if(!a.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+a);return""}b&&(a=a.replace(/#.*/,""));return BOOMR.utils.MD5?a.replace(/\?([^#]*)/,function(a,b){return"?"+(b.length>10?BOOMR.utils.MD5(b):b)}):a},pluginConfig:function(a,b,c,d){var e,f=0;if(!b||!b[c])return!1;for(e=0;e<d.length;e++)if(void 0!==b[c][d[e]]){a[d[e]]=b[c][d[e]];f++}return f>0},arrayFilter:function(a,b){var c=[];if(!(this.isArray(a)||a&&"number"==typeof a.length)||"function"!=typeof b)return c;if("function"==typeof a.filter)c=a.filter(b);else for(var d,e=-1,f=a.length;++e<f;){d=a[e];b(d,e,a)&&(c[c.length]=d)}return c},arrayFind:function(a,b){if((this.isArray(a)||a&&"number"==typeof a.length)&&"function"==typeof b){if("function"==typeof a.find)return a.find(b);for(var c,d=-1,e=a.length;++d<e;){c=a[d];if(b(c,d,a))return c}}},isMutationObserverSupported:function(){return!(a&&a.navigator&&a.navigator.userAgent&&a.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&a&&a.MutationObserver&&"function"==typeof a.MutationObserver},addObserver:function(a,b,c,d,e,f){function g(a){var b=!1;if(h.timer){clearTimeout(h.timer);h.timer=null}if(d){b=d.call(f,a,e);b||(d=null)}if(!b&&h.observer){h.observer.disconnect();h.observer=null}"number"==typeof b&&b>0&&(h.timer=setTimeout(g,b))}var h={observer:null,timer:null};if(!this.isMutationObserverSupported()||!d||!a)return null;h.observer=new BOOMR.window.MutationObserver(g);c&&(h.timer=setTimeout(g,h.timeout));h.observer.observe(a,b);return h},addListener:function(a,c,d,e){var f=!1;if(a.addEventListener){e&&BOOMR.browser.supportsPassive()&&(f={capture:!1,passive:!0});a.addEventListener(c,d,f)}else a.attachEvent&&a.attachEvent("on"+c,d);b.listenerCallbacks[c]=b.listenerCallbacks[c]||[];b.listenerCallbacks[c].push({el:a,fn:d})},removeListener:function(a,c,d){var e;a.removeEventListener?a.removeEventListener(c,d,!1):a.detachEvent&&a.detachEvent("on"+c,d);if(b.listenerCallbacks.hasOwnProperty(c))for(var e=0;e<b.listenerCallbacks[c].length;e++)if(d===b.listenerCallbacks[c][e].fn&&a===b.listenerCallbacks[c][e].el){b.listenerCallbacks[c].splice(e,1);return}},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},inArray:function(a,b){var c;if(void 0===a||void 0===b||!b.length)return!1;for(c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},reindexArray:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getQueryParamValue:function(a,b){var c,d,e,f;if(!a)return null;if("string"==typeof b){c=BOOMR.window.document.createElement("a");c.href=b}else c="object"==typeof b&&"string"==typeof b.search?b:BOOMR.window.location;d=c.search.slice(1).split(/&/);for(e=0;e<d.length;e++)if(d[e]){f=d[e].split("=");if(f.length&&f[0]===a)return decodeURIComponent(f[1].replace(/\+/g," "))}return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)})},generateId:function(a){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,a||40).replace(/x/g,function(a){var a=(Math.random()||.01).toString(36);return"0"===a?"0":a.substr(2,1)})},serializeForUrl:function(a){if(BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl)return BOOMR.utils.Compression.jsUrl(a);if(window.JSON)return JSON.stringify(a);BOOMR.debug("JSON is not supported");return""},getMyURL:function(){var a,b=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(b)return b.src;var c,d=document.getElementsByTagName("script");for(c=d.length;c--;)if("interactive"===d[c].readyState)return d[c].src;try{throw new Error}catch(e){if("stack"in e){a=this.arrayFilter(e.stack.split(/\n/),function(a){return a.match(/https?:\/\//)});if(a&&a.length)return a[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}}return""},scroll:function(){var b=void 0!==a.pageXOffset,c="CSS1Compat"===(a.document.compatMode||""),d={x:0,y:0};if(b)if("function"==typeof a.pageXOffset){d.x=a.pageXOffset();d.y=a.pageYOffset()}else{d.x=a.pageXOffset;d.y=a.pageYOffset}else if(c){d.x=a.document.documentElement.scrollLeft;d.y=a.document.documentElement.scrollTop}else{d.x=a.document.body.scrollLeft;d.y=a.document.body.scrollTop}"number"==typeof d.sx&&(d.sx=Math.round(d.sx));"number"==typeof d.sy&&(d.sy=Math.round(d.sy));return d},windowHeight:function(){return a.innerHeight||a.document.documentElement.clientHeight||a.document.body.clientHeight},windowWidth:function(){return a.innerWidth||a.document.documentElement.clientWidth||a.document.body.clientWidth}},browser:{results:{},supportsPassive:function(){if(void 0===BOOMR.browser.results.supportsPassive){BOOMR.browser.results.supportsPassive=!1;if(!Object.defineProperty)return!1;try{var a=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,a)}catch(b){}}return BOOMR.browser.results.supportsPassive}},init:function(c){var e,f,g=["autorun","beacon_auth_key","beacon_auth_token","beacon_url","beacon_send_externally","beacon_type","site_domain","strip_query_string","user_ip"];BOOMR_check_doc_domain();c||(c={});void 0!==c.log&&(this.log=c.log);this.log||(this.log=function(){});if(!this.pageId){this.pageId=BOOMR.utils.generateId(8);BOOMR.debug("Generated PageID: "+this.pageId)}if(c.primary&&b.handlers_attached)return this;void 0!==c.autorun&&(b.autorun=c.autorun);for(f in this.plugins)if(this.plugins.hasOwnProperty(f)){if(c[f]&&c[f].hasOwnProperty("enabled")&&!1===c[f].enabled){b.disabled_plugins[f]=1;"function"==typeof this.plugins[f].disable&&this.plugins[f].disable();continue}if(b.disabled_plugins[f]){if(!c[f]||!c[f].hasOwnProperty("enabled")||!0!==c[f].enabled)continue;"function"==typeof this.plugins[f].enable&&this.plugins[f].enable();delete b.disabled_plugins[f]}if("function"==typeof this.plugins[f].init)try{this.plugins[f].init(c)}catch(i){BOOMR.addError(i,f+".init")}}for(e=0;e<g.length;e++)void 0!==c[g[e]]&&(b[g[e]]=c[g[e]]);if(b.handlers_attached)return this;if(!b.onloadfired&&(void 0===c.autorun||!1!==c.autorun)){BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0);BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}BOOMR.utils.addListener(a,"DOMContentLoaded",function(){b.fireEvent("dom_loaded")});BOOMR.fireEvent("config",c);BOOMR.subscribe("config",function(a){a.beacon_url&&(b.beacon_url=a.beacon_url)});BOOMR.subscribe("spa_navigation",b.spaNavigation,null,b);!function(){var c,e;if(void 0!==h){BOOMR.utils.addListener(d,h,function(){b.fireEvent("visibility_changed")});b.lastVisibilityState=BOOMR.visibilityState();BOOMR.subscribe("visibility_changed",function(){var a=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[a]=BOOMR.now();BOOMR.debug("Visibility changed from "+b.lastVisibilityState+" to "+a);if("prerender"===b.lastVisibilityState&&"prerender"!==a){BOOMR.addVar("vis.pre","1");b.fireEvent("prerender_to_visible")}b.lastVisibilityState=a})}BOOMR.utils.addListener(d,"mouseup",b.xb_handler("click"));c=d.getElementsByTagName("form");for(e=0;e<c.length;e++)BOOMR.utils.addListener(c[e],"submit",b.xb_handler("form_submit"));a.onpagehide||null===a.onpagehide||BOOMR.utils.addListener(a,"unload",function(){BOOMR.window=a=null})}();b.handlers_attached=!0;return this},attach_page_ready:function(b){BOOMR.hasBrowserOnloadFired()?this.setImmediate(b,null,null,BOOMR):a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pageshow",b):BOOMR.utils.addListener(a,"load",b)},page_ready_autorun:function(a){b.autorun&&BOOMR.page_ready(a,!0)},page_ready:function(c,d){var e;if(!d&&"number"==typeof c){e=c;c=null}c||(c=a.event);c||(c={name:"load"});if(d){if("number"==typeof a.BOOMR_page_ready){c.timing=c.timing||{};c.timing.loadEventEnd=a.BOOMR_page_ready;BOOMR.addVar("pr",1,!0)}}else{c.timing=c.timing||{};e?c.timing.loadEventEnd=e:"number"==typeof a.BOOMR_page_ready?c.timing.loadEventEnd=a.BOOMR_page_ready:c.timing.loadEventEnd=BOOMR.now();BOOMR.addVar("pr",1,!0)}if(b.onloadfired)return this;b.fireEvent("page_ready",c);b.onloadfired=!0;return this},hasBrowserOnloadFired:function(){var b=BOOMR.getPerformance();return d.readyState&&"complete"===d.readyState||b&&b.timing&&b.timing.loadEventStart>0||a.BOOMR_onload>0},onloadFired:function(){return b.onloadfired},setImmediate:function(b,c,d,e){var f,g;f=function(){b.call(e||null,c,d||{},g);f=null};a.requestIdleCallback?a.requestIdleCallback(f,{timeout:1e3}):a.setImmediate?a.setImmediate(f):setTimeout(f,10)},now:function(){return Date.now||function(){return(new Date).getTime()}}(),getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(a){}},hrNow:function(){var a,b,c=BOOMR.getPerformance();if(c&&c.now)a=c.now();else{b=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start;a=BOOMR.now()-b}return a},visibilityState:void 0===g?function(){return"visible"}:function(){return d[g]},lastVisibilityEvent:{},registerEvent:function(a){if(b.events.hasOwnProperty(a))return this;b.events[a]=[];return this},disable:function(){b.clearEvents();b.clearListeners()},fireEvent:function(a,c){return b.fireEvent(a,c)},subscribe:function(c,d,e,f,g){var h,i,j;c=c.toLowerCase();b.translate_events[c]&&(c=b.translate_events[c]);b.events.hasOwnProperty(c)||(b.events[c]=[]);j=b.events[c];for(h=0;h<j.length;h++){i=j[h];if(i&&i.fn===d&&i.cb_data===e&&i.scope===f)return this}j.push({fn:d,cb_data:e||{},scope:f||null,once:g||!1});"page_ready"===c&&b.onloadfired&&b.autorun&&this.setImmediate(d,null,e,f);"page_unload"!==c&&"before_unload"!==c||function(){var g,h=j.length;g=function(g){d&&d.call(f,g||a.event,e);"page_unload"===c&&h===b.events[c].length&&BOOMR.real_sendBeacon()};"page_unload"===c&&(a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pagehide",g):BOOMR.utils.addListener(a,"unload",g));BOOMR.utils.addListener(a,"beforeunload",g)}();return this},addError:function(a,c,d){var e,f=BOOMR.plugins.Errors;if(f&&f.is_supported())if("string"==typeof a)f.send({message:a,extra:d,functionName:c,noStack:!0},f.VIA_APP,f.SOURCE_BOOMERANG);else{"string"==typeof c&&(a.functionName=c);void 0!==d&&(a.extra=d);f.send(a,f.VIA_APP,f.SOURCE_BOOMERANG)}else{if("string"!=typeof a){e=String(a);e.match(/^\[object/)&&(e=a.name+": "+(a.description||a.message).replace(/\r\n$/,""));a=e}void 0!==c&&(a="["+c+":"+BOOMR.now()+"] "+a);d&&(a+=":: "+d);b.errors[a]?b.errors[a]++:b.errors[a]=1}},isCrossOriginError:function(a){return"SecurityError"===a.name||"TypeError"===a.name&&"Permission denied"===a.message||"Error"===a.name&&a.message&&a.message.match(/^(Permission|Access is) denied/)},addVar:function(a,c,d){if("string"==typeof a)b.vars[a]=c;else if("object"==typeof a){var e,f=a;for(e in f)f.hasOwnProperty(e)&&(b.vars[e]=f[e])}d&&(b.singleBeaconVars[a]=1);return this},appendVar:function(a,b){var c=BOOMR.getVar(a)||"";c&&(c+=",");BOOMR.addVar(a,c+b);return this},removeVar:function(a){var c,d;if(!arguments.length)return this;d=1===arguments.length&&BOOMR.utils.isArray(a)?a:arguments;for(c=0;c<d.length;c++)b.vars.hasOwnProperty(d[c])&&delete b.vars[d[c]];return this},hasVar:function(a){return b.vars.hasOwnProperty(a)},getVar:function(a){return b.vars[a]},setVarPriority:function(a,c){if("number"!=typeof c||1!==Math.abs(c))return this;b.varPriority[c][a]=1;return this},setReferrer:function(a,c){b.r=a;b.r2=c&&a!==c?c:void 0},requestStart:function(a){var b=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+a,b);return{loaded:function(c){BOOMR.responseEnd(a,b,c)}}},readyToSend:function(){var a;for(a in this.plugins)if(this.plugins.hasOwnProperty(a)){if(b.disabled_plugins[a])continue;if("function"==typeof this.plugins[a].readyToSend&&!1===this.plugins[a].readyToSend()){BOOMR.debug("Plugin "+a+" is not ready to send");return!1}}return!0},responseEnd:function(a,c,d,e){c="number"==typeof c?c:BOOMR.now();e="number"==typeof e?e:BOOMR.now();if(BOOMR.readyToSend())if(BOOMR.hasSentPageLoadBeacon()||BOOMR.utils.inArray(a.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if("object"==typeof a){if(!a.url){BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");return}b.fireEvent("xhr_load",a)}else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",a);BOOMR.plugins.RT.startTimer("xhr_"+a,c);b.fireEvent("xhr_load",{name:"xhr_"+a,data:d,timing:{loadEventEnd:e}})}else BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(a,c,d,e)},null,BOOMR,!0);else{BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again...");setTimeout(function(){BOOMR.responseEnd(a,c,d,e)},1e3)}},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(a){a&&(b.beacon_url_override=a);if(!b.beaconQueued){b.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return!0},real_sendBeacon:function(){var c,e,f=[],g={};if(!b.beaconQueued)return!1;b.beaconQueued=!1;BOOMR.debug("Checking if we can send beacon");for(c in this.plugins)if(this.plugins.hasOwnProperty(c)){if(b.disabled_plugins[c])continue;if(!this.plugins[c].is_complete(b.vars)){BOOMR.debug("Plugin "+c+" is not complete, deferring beacon send");return!1}}if(!(window&&window.Image&&window.navigator&&BOOMR.window)){BOOMR.debug("DOM not fully available, not sending a beacon");return!1}var h=BOOMR.utils.inArray(b.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),i=void 0===b.vars["http.initiator"]||h;b.vars.pgu||(b.vars.pgu=h?d.URL:d.URL.replace(/#.*/,""));b.vars.pgu=BOOMR.utils.cleanupURL(b.vars.pgu);b.vars.u&&!h||(b.vars.u=b.vars.pgu);b.vars.pgu===b.vars.u&&delete b.vars.pgu;b.r?b.vars.r=BOOMR.utils.cleanupURL(b.r):delete b.vars.r;b.r2?b.vars.r2=BOOMR.utils.cleanupURL(b.r2):delete b.vars.r2;b.vars.v=BOOMR.version;if(BOOMR.visibilityState()){b.vars["vis.st"]=BOOMR.visibilityState();BOOMR.lastVisibilityEvent.visible&&(b.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible);BOOMR.lastVisibilityEvent.hidden&&(b.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)}b.vars["ua.plt"]=navigator.platform;b.vars["ua.vnd"]=navigator.vendor;this.pageId&&(b.vars.pid=this.pageId);if(a!==window){e="if";b.vars[e]=""}for(c in b.errors)b.errors.hasOwnProperty(c)&&f.push(c+(b.errors[c]>1?" (*"+b.errors[c]+")":""));f.length>0&&(b.vars.errors=f.join("\n"));b.errors={};b.fireEvent("before_beacon",b.vars);for(c in b.vars)b.vars.hasOwnProperty(c)&&(g[c]=b.vars[c]);BOOMR.removeVar("qt");for(var j in b.singleBeaconVars)b.singleBeaconVars.hasOwnProperty(j)&&BOOMR.removeVar(j);b.singleBeaconVars={};if(!b.hasSentPageLoadBeacon&&i){b.hasSentPageLoadBeacon=!0;BOOMR.setImmediate(function(){b.fireEvent("page_load_beacon",g)})}BOOMR.sendBeaconData(g);return!0},hasSentPageLoadBeacon:function(){return b.hasSentPageLoadBeacon},sendBeaconData:function(c){var d,e,f,g,h,i=[],j=[],k=!0;BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(c));if(!b.beacon_send_externally){b.beacon_url=b.beacon_url_override||b.beacon_url;if(!b.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return!1}if(!b.beaconUrlAllowed(b.beacon_url)){BOOMR.debug("Beacon URL not allowed: "+b.beacon_url);return!1}if(0===c.length)return!1;b.fireEvent("beacon",c);i=this.getVarsOfPriority(c,-1);j=this.getVarsOfPriority(c,1);d=i.concat(this.getVarsOfPriority(c,0),j);e=d.join("&");f=b.beacon_url+(b.beacon_url.indexOf("?")>-1?"&":"?")+e;if("GET"===b.beacon_type){k=!0;f.length>BOOMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("Boomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")}else("POST"===b.beacon_type||f.length>BOOMR.constants.MAX_GET_LENGTH)&&(k=!1);if(a&&a.navigator&&"function"==typeof a.navigator.sendBeacon&&"function"==typeof a.Blob&&void 0===b.beacon_auth_token&&"GET"!==b.beacon_type){var l=new a.Blob([e+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(a.navigator.sendBeacon(b.beacon_url,l))return!0}BOOMR.orig_XMLHttpRequest||a&&a.XMLHttpRequest||(k=!0);if(k){try{g=new Image}catch(m){BOOMR.debug("Image is not a constructor, not sending a beacon");return!1}g.src=f}else{h=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(h,e)}catch(m){h=new BOOMR.boomerang_frame.XMLHttpRequest;this.sendXhrPostBeacon(h,e)}}return!0}b.fireEvent("beacon",c)},hasSentPageLoadBeacon:function(){return b.hasSentPageLoadBeacon},sendXhrPostBeacon:function(a,c){a.open("POST",b.beacon_url);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(void 0!==b.beacon_auth_token){void 0===b.beacon_auth_key&&(b.beacon_auth_key="Authorization");a.setRequestHeader(b.beacon_auth_key,b.beacon_auth_token)}a.send(c)},getVarsOfPriority:function(a,c){var d,e=[];if(0!==c){for(d in b.varPriority[c])if(b.varPriority[c].hasOwnProperty(d)&&a.hasOwnProperty(d)){e.push(this.getUriEncodedVar(d,a[d]));delete a[d]}}else for(d in a)a.hasOwnProperty(d)&&e.push(this.getUriEncodedVar(d,a[d]));return e},getUriEncodedVar:function(a,b){void 0!==b&&null!==b||(b="");"object"==typeof b&&(b=BOOMR.utils.serializeForUrl(b));return encodeURIComponent(a)+"="+encodeURIComponent(b)},getResourceTiming:function(a,b){var c,d=BOOMR.getPerformance();try{if(d&&"function"==typeof d.getEntriesByName){c=d.getEntriesByName(a);if(c&&c.length){"function"==typeof b&&c.sort(b);return c[c.length-1]}}}catch(e){}}};c.url=c.utils.getMyURL();delete BOOMR_start;if("number"==typeof BOOMR_lstart){c.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else"number"==typeof BOOMR.window.BOOMR_lstart&&(c.t_lstart=BOOMR.window.BOOMR_lstart);"number"==typeof BOOMR.window.BOOMR_onload&&(c.t_onload=BOOMR.window.BOOMR_onload);!function(){var a;"object"==typeof console&&void 0!==console.log?c.log=function(a,b,c){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+c+": ["+b+"] "+a)}:c.log=function(){};a=function(a){return function(b,c){this.log(b,a,"boomerang"+(c?"."+c:""));return this}};c.debug=function(){};c.info=a("info");c.warn=a("warn");c.error=a("error")}();try{var j=c.getPerformance();j&&"function"==typeof j.now&&/\[native code\]/.test(String(j.now))&&j.timing&&j.timing.navigationStart&&(c.now=function(){return Math.round(j.now()+j.timing.navigationStart)})}catch(k){}b.checkLocalStorageSupport();!function(){var a;for(a in c)c.hasOwnProperty(a)&&(BOOMR[a]=c[a]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}();f("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);!function(){function a(a){BOOMR.debug(a,"Continuity")}function b(a){var b=window.UserTimingCompression||BOOMR.window.UserTimingCompression;return b?b.jsUrl(a):window.JSON?JSON.stringify(a):""}function c(a,b,c,d,e){var i,j,k,l,m,n="",q=0;if(!c||!BOOMR.utils.Compression)return"";if(0===c.length)return"";if(b){void 0===c[d]&&(c[d]=0);for(i=d+1;i<=e;i++)void 0===c[i]&&(c[i]=c[i-1])}for(i=d;i<=e;i++){q="number"!=typeof c[i]||isNaN(c[i])?0:c[i];a===f?k=q<=63?o.charAt(q):p+q.toString(36)+p:a===g?k=q.toString(36):a===h&&(k=q<99?q<=9?"0"+Math.max(q,0):q:"__");if(i+3<=e&&(c[i+1]===q||0===q&&void 0===c[i+1])&&(c[i+2]===q||0===q&&void 0===c[i+2])&&(c[i+3]===q||0===q&&void 0===c[i+3])){j=1;for(;i<e&&(c[i+1]===q||0===q&&void 0===c[i+1]);){j++;i++}l="*"+j.toString(36)+"*"+k}else l=k;if(0!==q||i!==e){a===g&&m&&(n+=",");m=!0;n+=l}}return m?a.toString()+n:""}if(!BOOMR.plugins.Continuity){var d=1e3,e=500,f=0,g=1,h=2,i=0,j=1,k=2,l=3,m=4,n=5,o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",p=".",q=BOOMR.getPerformance(),r={},s=q&&q.timing&&q.timing.navigationStart?q.timing.navigationStart:BOOMR.now(),t=function(a){function b(a,b,c){z[a]||(z[a]=[]);A[a]={compressMode:b||f,backfillLast:c}}function e(){return Math.floor((BOOMR.now()-a)/d)}function g(a,b,c){void 0===c&&(c=e());z[a]&&(z[a][c]=b)}function h(a,b,c){void 0===c&&(c=e());void 0===b&&(b=1);if(z[a]){z[a][c]||(z[a][c]=0);z[a][c]+=b}}function i(a,b,c){void 0===b&&(b=e());B.push({type:a,time:b,val:c});B.length>impl.logMaxEntries&&Array.prototype.splice.call(B,0,B.length-impl.logMaxEntries)}function j(b,c,f){if(!z[b])return[];for(var g=Math.floor((c-a)/d),h=e(),i=[],j=g;j<=h;j++)z[b].hasOwnProperty(j)?i[j]=z[b][j]:void 0!==f&&(i[j]=f);return i}function k(a){var b,c,d,e,f,g,h=0;if(!BOOMR.window||!BOOMR.window.document||"function"!=typeof BOOMR.window.document.querySelectorAll)return 0;if(!q||"function"!=typeof q.getEntriesByType)return 0;b=a+", "+a+" * img";c=BOOMR.window.document.querySelectorAll(b);if(c&&c.length)for(d=0;d<c.length;d++){f=c[d].src;if(f){g=q.getEntriesByName(f);if(g&&g.length)for(e=0;e<g.length;e++)h=Math.max(h,g[e].responseEnd)}}return h?Math.floor(h+s):0}function l(){var a=0;if(impl.ttiWaitForFrameworkReady){if(!impl.frameworkReady)return;a=impl.frameworkReady}if(BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&q&&q.timeOrigin){var b=BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint");b||(b=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"));b&&(a=Math.max(a,Math.round(b+q.timeOrigin)))}else if(q&&q.timing&&q.timing.msFirstPaint)a=Math.max(a,q.timing.msFirstPaint);else if(BOOMR.window&&BOOMR.window.chrome&&"function"==typeof BOOMR.window.chrome.loadTimes){var c=BOOMR.window.chrome.loadTimes();c&&c.firstPaintTime&&(a=Math.max(a,1e3*c.firstPaintTime))}q&&q.timing&&q.timing.domContentLoadedEventEnd&&(a=Math.max(a,q.timing.domContentLoadedEventEnd));if(impl.ttiWaitForHeroImages){E=k(impl.ttiWaitForHeroImages);E&&(a=Math.max(a,E))}return a}function m(){for(var a="",b=0;b<B.length;b++){var c=B[b];0!==b&&(a+="|");a+=c.type;a+=Math.round(c.time-s).toString(36);for(var d in c.val)if(c.val.hasOwnProperty(d)){a+=","+d;"number"==typeof c.val[d]?a+=c.val[d].toString(36):a+=c.val[d]}}""!==a&&impl.addToBeacon("c.l",a)}function n(b,f){return c(A[b].compressMode,A[b].backfillLast,z[b],0!==f?Math.floor((f-a)/d):0,e())}function o(a){var b,c;for(b in z)if(z.hasOwnProperty(b)){c=n(b,a);""!==c&&impl.addToBeacon("c.t."+b,c)}}function p(b){var c=e(),f=0,g=0;impl.sendLog&&void 0!==b&&m();impl.sendTimeline&&void 0!==b&&o(b);if(!C){if(!D){D=l();if(!D)return}impl.addToBeacon("c.tti.vr",r.timeToVisuallyReady());impl.addToBeacon("c.tti.fr",r.timeToFrameworkReady());impl.addToBeacon("c.tti.hi",r.timeToHeroImagesReady());if(z.longtask||z.fps||z.busy){var h=Math.floor((D-a)/d);for(f=h;f<=c;f++)if(z.longtask&&z.longtask[f])g=0;else if(z.fps&&(!z.fps[f]||z.fps[f]<x))g=0;else if(z.busy&&z.busy[f]>y)g=0;else if(z.interdly&&z.interdly[f])g=0;else{g++;if(g>=v){C=a+(f-v)*d;C=Math.max(C,D);break}}C>0&&impl.addToBeacon("c.tti",r.timeToInteractive())}}}function t(){z={};B=[]}function u(){for(var a in z)z.hasOwnProperty(a)&&(z[a]=[]);B=[]}var v=5,w=20,x=w/(1e3/d),y=50,z={},A={},B=[],C=0,D=0,E=0;BOOMR.fpsLog&&BOOMR.fpsLog.length&&(a=BOOMR.fpsLog[0]+s);r.timeToInteractive=function(){if(C)return C-s};r.timeToVisuallyReady=function(){if(D)return D-s};r.timeToHeroImagesReady=function(){if(impl.ttiWaitForHeroImages&&E)return E-s};r.timeToFrameworkReady=function(){if(impl.ttiWaitForFrameworkReady&&impl.frameworkReady)return impl.frameworkReady-s};r.log=function(){return B};return{register:b,set:g,log:i,increment:h,getTimeBucket:e,getData:j,analyze:p,stop:t,onBeacon:u}},u=function(a,c){function d(a){var b,d;if(p){b=a.getEntries();Array.prototype.push.apply(o,b);for(d=0;d<b.length;d++)q+=b[d].duration;c.increment("longtask",b.length)}}function e(){return o}function g(){o=[];q=0}function h(a){var c,d,e,f,g,h=[],i=[];impl.addToBeacon("c.lt.n",r.longTasksCount(),!0);if(0!==o.length){for(c=0;c<o.length;c++){e=o[c];f={s:Math.round(e.startTime).toString(36),d:Math.round(e.duration).toString(36),n:k[e.name]?k[e.name]:0};i=[];for(d=0;d<e.attribution.length;d++){g=e.attribution[d];if("script"!==g.name||"iframe"!==g.containerType||g.containerName||g.containerId||g.containerSrc){
var j=g.containerName?g.containerName:void 0,n=g.containerId?g.containerId:void 0;j===n&&(j=void 0);var p=void 0===n?g.containerSrc:void 0;i.push({a:l[g.name]?l[g.name]:0,t:m[g.containerType]?m[g.containerType]:0,n:j,i:n,s:p})}}i.length>0&&(f.a=i);h.push(f)}impl.addToBeacon("c.lt.tt",r.longTasksTime());impl.addToBeacon("c.lt",b(h))}}function i(){p=!1;n.disconnect();g()}function j(){g()}if(a.PerformanceObserver&&a.PerformanceLongTaskTiming){var k={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},l={unknown:0,script:1,layout:2},m={unknown:0,iframe:1,embed:2,object:3},n=new a.PerformanceObserver(d);try{n.observe({entryTypes:["longtask"]})}catch(s){return}c.register("longtask",f);var o=[],p=!0,q=0;r.longTasksTime=function(){return q};r.longTasksCount=function(){return o.length};return{getTasks:e,clearTasks:g,analyze:h,stop:i,onBeacon:j}}},v=function(a,b){function c(){var a=BOOMR.now(),b=a-n;n=a;if(b>2*i+j){var c=Math.floor((b-i)/i);o+=c;p+=c;b-=c*i}o++;b>i+j&&p++}function d(){var a=b.getTimeBucket(),c=a,d=0;if(0!==o){for(;o>l+1&&d<=m;){b.set("busy",100,--c);o-=l;p=Math.max(p-l,0);q+=l;s+=l;d++}q+=o;s+=p;b.set("busy",Math.round(p/o*100),a);o=0;p=0}}function e(a){impl.addToBeacon("c.b",r.pageBusy())}function f(){t=!1;if(u){clearInterval(u);u=!1}if(v){clearInterval(v);v=!1}}function g(){q=0;s=0}b.register("busy",h);var i=32,j=4,k=100,l=Math.floor(k/i),m=100,n=BOOMR.now(),o=0,p=0,q=0,s=0,t=!0,u=!1,v=!1;r.pageBusy=function(){return 0===q?0:Math.round(s/q*100)};u=setInterval(c,i);v=setInterval(d,k);return{analyze:e,stop:f,onBeacon:g}},w=function(a,b){function c(d){if(n){d-j>=k&&m++;j=d;l++;b.increment("fps");a.requestAnimationFrame(c)}}function e(a){impl.addToBeacon("c.f",r.fps());impl.addToBeacon("c.f.d",r.fpsDuration());impl.addToBeacon("c.f.m",r.fpsMinimum());impl.addToBeacon("c.f.l",r.fpsLongFrames());impl.addToBeacon("c.f.s",r.fpsStart())}function g(){n=!1;i=0}function h(){n&&(i=BOOMR.now());l=0;m=0}b.register("fps",f);var i,j,k=50,l=0,m=0,n=!0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){j=i=BOOMR.fpsLog[0]+s;for(var o=0;o<BOOMR.fpsLog.length;o++){var p=s+BOOMR.fpsLog[o];b.increment("fps",1,Math.floor((p-i)/d));p-j>=k&&m++;j=p}l=BOOMR.fpsLog.length;delete BOOMR.fpsLog}else i=BOOMR.now();a.requestAnimationFrame(c);r.fps=function(){var a=r.fpsDuration();if(a)return Math.floor(l/(a/1e3))};r.fpsDuration=function(){if(i)return BOOMR.now()-i};r.fpsMinimum=function(){if(r.fpsDuration()){var a=BOOMR.utils.reindexArray(b.getData("fps",i,0)).slice(1,-1);return Math.min.apply(Math,a)}};r.fpsLongFrames=function(){return m};r.fpsStart=function(){return i?i.toString(36):0};return{analyze:e,stop:g,onBeacon:h}},x=function(a,b,c){function e(a){var d=BOOMR.now();t++;d-w>m&&v++;w=d;var e=BOOMR.utils.scroll().y,f=Math.abs(o-e);u+=f;b.increment("scroll",f);if(0===p||Math.abs(p-e)>n){b.log(i,d,{y:e});p=e}c.interact("scroll",d,a);q+=Math.round(f/A*100);s+=Math.round(f/A*100);o=e}function g(){var a=Math.min(q,100);0!==a&&b.set("scrollpct",a);q=0}function j(a){impl.addToBeacon("c.s",r.scrollCount());impl.addToBeacon("c.s.p",r.scrollPct());impl.addToBeacon("c.s.y",r.scrollPixels());impl.addToBeacon("c.s.d",r.scrollDistinct())}function k(){if(x){clearInterval(x);x=!1}BOOMR.utils.removeListener(a,"scroll",e)}function l(){s=0;t=0;u=0;v=0}if(a&&a.document&&a.document.body&&a.document.documentElement){var m=2e3,n=20,o=0,p=0,q=0,s=0,t=0,u=0,v=0,w=0,x=!1,y=a.document.body,z=a.document.documentElement;b.register("scroll",f);b.register("scrollpct",h);var A=Math.max(y.scrollHeight,y.offsetHeight,z.clientHeight,z.scrollHeight,z.offsetHeight)-BOOMR.utils.windowHeight();r.scrollPct=function(){return s};r.scrollCount=function(){return t};r.scrollDistinct=function(){return v};r.scrollPixels=function(){return u};BOOMR.utils.addListener(a,"scroll",e,!0);x=setInterval(g,d);return{analyze:j,stop:k,onBeacon:l}}},y=function(a,b,c){function d(a){var d=BOOMR.now(),e=a.clientX,f=a.clientY;l++;var g=Math.round(Math.sqrt(Math.pow(p-f,2)+Math.pow(o-e,2)));if(q===a.target||g<=i){m++;if(m+1>=k){n++;BOOMR.fireEvent("rage_click",a)}}else m=0;o=e;p=f;q=a.target;b.increment("click");b.log(j,d,{x:e,y:f});c.interact("click",d,a)}function e(a){impl.addToBeacon("c.c",r.clicksCount());impl.addToBeacon("c.c.r",r.clicksRage())}function g(){BOOMR.utils.removeListener(a.document,"click",d)}function h(){l=0;m=0;n=0}b.register("click",f);var i=10,k=3,l=0,m=0,n=0,o=0,p=0,q=null;r.clicksCount=function(){return l};r.clicksRage=function(){return n};BOOMR.utils.addListener(a.document,"click",d,!0);return{analyze:e,stop:g,onBeacon:h}},z=function(a,b,c){function d(a){var d=BOOMR.now();i++;27===a.keyCode&&j++;b.increment("key");b.log(l,d);c.interact("key",d,a)}function e(a){impl.addToBeacon("c.k",r.keyCount());impl.addToBeacon("c.k.e",r.keyEscapes())}function g(){BOOMR.utils.removeListener(a.document,"keydown",d)}function h(){i=0;j=0}b.register("key",f);var i=0,j=0;r.keyCount=function(){return i};r.keyEscapes=function(){return j};BOOMR.utils.addListener(a.document,"keydown",d,!0);return{analyze:e,stop:g,onBeacon:h}},A=function(a,b,c){function e(a){var c=(BOOMR.now(),a.clientX),d=a.clientY,e=Math.round(Math.sqrt(Math.pow(q-d,2)+Math.pow(p-c,2))),f=Math.round(e/z*100);u+=f;v+=f;w+=e;p=c;q=d;b.increment("mouse",e)}function g(){var a=Math.min(u,100);0!==a&&b.set("mousepct",a);u=0}function i(){if(s!==p||t!==q){if(Math.round(Math.sqrt(Math.pow(t-q,2)+Math.pow(s-p,2)))>=n){b.log(k,BOOMR.now(),{x:p,y:q});s=p;t=q}}}function j(a){impl.addToBeacon("c.m.p",r.mousePct());impl.addToBeacon("c.m.n",r.mousePixels())}function l(){if(x){clearInterval(x);x=!1}if(y){clearInterval(y);y=!1}BOOMR.utils.removeListener(a.document,"mousemove",e)}function m(){v=0;w=0}b.register("mouse",f);b.register("mousepct",h);var n=10,o=250,p=0,q=0,s=0,t=0,u=0,v=0,w=0,x=!1,y=!1,z=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));r.mousePct=function(){return v};r.mousePixels=function(){return w};x=setInterval(g,d);y=setInterval(i,o);BOOMR.utils.addListener(a.document,"mousemove",e,!0);return{analyze:j,stop:l,onBeacon:m}},B=function(b,c,d){function e(b,d,e){d=d||BOOMR.now();if(x){t++;p||(p=d);var f=0;if(e&&e.timeStamp){f=e.timeStamp>14e11?d-e.timeStamp:d-s-e.timeStamp;u+=f;null===q&&(q=Math.round(f));if(f>m){c.increment("interdly");v++;w+=f}}c.increment("inter");if(!C&&impl.afterOnloadMonitoring){z=BOOMR.now();if(!y){a("Interaction detected, sending a beacon after "+n+" ms");y=z;B=setTimeout(i,o)}if(A){a("Clearing previous interaction timeout");clearTimeout(A);A=!1}A=setTimeout(i,n)}}}function g(){C=!0;h()}function h(){if(A){clearTimeout(A);A=!1}if(B){clearTimeout(B);B=!1}}function i(){a("Sending interaction beacon");h();BOOMR.fireEvent("interaction");impl.addToBeacon("rt.tstart",y);impl.addToBeacon("rt.end",z);impl.addToBeacon("rt.start","manual");impl.addToBeacon("http.initiator","interaction");BOOMR.sendBeacon()}function j(a){impl.addToBeacon("c.ttfi",r.timeToFirstInteraction());impl.addToBeacon("c.i.dc",r.interactionDelayed());impl.addToBeacon("c.i.dt",r.interactionDelayedTime());impl.addToBeacon("c.i.a",r.interactionAvgDelay());null!==q&&impl.addToBeacon("c.fid",r.firstInputDelay(),!0)}function k(){x=!1}function l(){w=0;v=0;t=0;u=0;y=0;z=0;C=!1;h()}c.register("inter",f);c.register("interdly",f);var m=50,n=d,o=3e4,p=0,q=null,t=0,u=0,v=0,w=0,x=!0,y=0,z=0,A=!1,B=!1,C=!1;r.interactionDelayed=function(){return v};r.interactionDelayedTime=function(){return Math.round(w)};r.interactionAvgDelay=function(){if(t>0)return Math.round(u/t)};r.timeToFirstInteraction=function(){if(p)return p-s};r.firstInputDelay=function(){if(null!==q)return q};BOOMR.subscribe("spa_init",g,null,impl);return{interact:e,analyze:j,stop:k,onBeacon:l}},C=function(a,b,c){function d(){g=!1}b.register("vis",f);var e={visible:0,hidden:1,prerender:2,unloaded:3},g=!0;BOOMR.subscribe("visibility_changed",function(a){var d=BOOMR.now();if(g){b.increment("vis");b.log(m,d,{s:e[BOOMR.visibilityState()]});c.interact("vis",d,a)}});return{stop:d}},D=function(a,b,c){function d(a){var d=BOOMR.now(),e=window.orientation;if(g){b.increment("orn");window.screen&&screen.orientation&&"number"==typeof screen.orientation.angle&&(e=screen.orientation.angle);"number"==typeof e&&b.log(n,d,{a:e});c.interact("orn",d,a)}}function e(){g=!1;BOOMR.utils.removeListener(a,"orientationchange",d)}b.register("orn",f);var g=!0;BOOMR.utils.addListener(a,"orientationchange",d,!0);return{stop:e}},E=function(a,b){function c(){var a=q&&q.memory&&q.memory.usedJSHeapSize;a&&b.set("mem",a);r=s.length;b.set("domsz",l.documentElement.innerHTML.length);b.set("domln",r);if(p>0){var c=Math.min(Math.round(p/r*100),100);b.set("mut",c);p=0}}function d(){m&&o&&b.set("bat",o.level)}function e(a){a.forEach(function(a){if("childList"===a.type)for(var b=0;b<a.addedNodes.length;b++){var c=a.addedNodes[b];p++;p+=c.getElementsByTagName?c.getElementsByTagName("*").length:0}})}function i(){m=!1;if(n){clearInterval(n);n=!1}j&&j.disconnect();o&&o.onlevelchange&&(o.onlevelchange=null);s=null}b.register("mem",g,!0);b.register("bat",h,!0);b.register("domsz",g,!0);b.register("domln",g,!0);b.register("mut",f);var j,k=1e3,l=a.document,m=!0,n=!1,o=null,p=0,r=0,s=l.getElementsByTagName("*");n=setInterval(c,k);a.navigator&&"function"==typeof a.navigator.getBattery&&a.navigator.getBattery().then(function(a){o=a;o.onlevelchange&&(o.onlevelchange=d)});if("function"==typeof a.MutationObserver){j=new a.MutationObserver(e);j.observe(l,{childList:!0,subtree:!0})}return{stop:i}};impl={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!0,afterOnload:!1,afterOnloadMaxLength:6e4,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!0,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,statsMonitor:null,addedVars:[],monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,onBeforeBeacon:function(){impl.runAllAnalyzers()},runAllAnalyzers:function(){var a,b;if(!impl.hasAddedDataToBeacon){for(a=0;a<impl.monitors.length;a++){b=impl[impl.monitors[a]];b&&"function"==typeof b.analyze&&b.analyze(impl.timeOfLastBeacon)}impl.addToBeacon("c.lb",impl.timeOfLastBeacon?impl.timeOfLastBeacon.toString(36):0);impl.timeOfLastBeacon=BOOMR.now();impl.hasAddedDataToBeacon=!0}},onBeacon:function(){var a;if(impl.addedVars&&impl.addedVars.length>0){BOOMR.removeVar(impl.addedVars);impl.addedVars=[]}for(a=0;a<impl.monitors.length;a++){var b=impl[impl.monitors[a]];if(b){impl.afterOnload||"function"==typeof b.stop&&b.stop();"function"==typeof b.onBeacon&&b.onBeacon()}}impl.hasAddedDataToBeacon=!1},onXhrLoad:function(a){a&&BOOMR.utils.inArray(a.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(impl.isSpa=!0);a&&"spa_hard"===a.initiator&&impl.onPageReady()},onPageReady:function(){impl.firedPageReady=!0;if(impl.afterOnload&&impl.monitorInteractions){impl.afterOnloadMonitoring=!0;impl.isSpa||"number"!=typeof impl.afterOnloadMaxLength||setTimeout(function(){impl.afterOnloadMonitoring=!1},impl.afterOnloadMaxLength)}if(impl.waitAfterOnload){var a=BOOMR.now();setTimeout(function b(){if(BOOMR.now()-a>impl.waitAfterOnload){impl.complete=!0;BOOMR.sendBeacon()}else{impl.timeline.analyze();if(r.timeToInteractive()){impl.complete=!0;BOOMR.sendBeacon()}else setTimeout(b,e)}},e)}else impl.complete=!0},addToBeacon:function(a,b,c){if(0!==b&&void 0!==b||c){BOOMR.addVar(a,b);impl.addedVars.push(a)}else BOOMR.removeVar(a)}};BOOMR.plugins.Continuity={init:function(a){BOOMR.utils.pluginConfig(impl,a,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline"]);if(impl.initialized)return this;impl.initialized=!0;impl.timeline=new t(BOOMR.now());if(BOOMR.window){if(impl.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming){impl.longTaskMonitor=new u(BOOMR.window,impl.timeline);impl.ttiMethod="lt"}if(impl.monitorFrameRate&&"function"==typeof BOOMR.window.requestAnimationFrame){impl.frameRateMonitor=new w(BOOMR.window,impl.timeline);impl.ttiMethod||(impl.ttiMethod="raf")}if(impl.monitorPageBusy&&(!BOOMR.window.PerformanceObserver||!BOOMR.window.PerformanceLongTaskTiming||!impl.monitorLongTasks)){impl.pageBusyMonitor=new v(BOOMR.window,impl.timeline);impl.ttiMethod||(impl.ttiMethod="b")}if(impl.monitorInteractions){impl.interactionMonitor=new B(BOOMR.window,impl.timeline,impl.afterOnloadMinWait);impl.scrollMonitor=new x(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.keyMonitor=new z(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.clickMonitor=new y(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.mouseMonitor=new A(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.visibilityMonitor=new C(BOOMR.window,impl.timeline,impl.interactionMonitor);impl.orientationMonitor=new D(BOOMR.window,impl.timeline,impl.interactionMonitor)}impl.monitorStats&&(impl.statsMonitor=new E(BOOMR.window,impl.timeline,impl.interactionMonitor))}BOOMR.addVar("c.e",s.toString(36));BOOMR.addVar("c.tti.m",impl.ttiMethod);BOOMR.subscribe("before_beacon",impl.onBeforeBeacon,null,impl);BOOMR.subscribe("beacon",impl.onBeacon,null,impl);BOOMR.subscribe("page_ready",impl.onPageReady,null,impl);BOOMR.subscribe("xhr_load",impl.onXhrLoad,null,impl);return this},is_complete:function(a){return impl.complete||a&&"error"===a["http.initiator"]},impl:impl,frameworkReady:function(){impl.frameworkReady=BOOMR.now()},metrics:r}}}();!function(a){var b,c;if(!BOOMR.plugins.RT){c={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:604800,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,cached_t_start:void 0,cached_xhr_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,addedVars:[],updateCookie:function(a,b){var d,e,f,g;if(!this.cookie)return!1;f=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{};if("object"==typeof a)for(g in a)if(a.hasOwnProperty(g))if(void 0===a[g])f.hasOwnProperty(g)&&delete f[g];else{"nu"!==g&&"r"!==g||(a[g]=BOOMR.utils.hashQueryString(a[g],!0));f[g]=a[g]}e=BOOMR.now();if(b){f[b]=e;c.lastActionTime=e}BOOMR.debug("Setting cookie (timer="+b+")\n"+BOOMR.utils.objectToString(f),"rt");if(!BOOMR.utils.setCookie(this.cookie,f,this.cookie_exp)){BOOMR.error("cannot set start cookie","rt");return!1}d=BOOMR.now();if(d-e>50){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "+e+" -> "+d,"rt")}return!0},initFromCookie:function(){var a,c;c=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie));if(c){c.s=Math.max(+c.ld||0,Math.max(+c.ul||0,+c.cl||0));BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(c),"rt");if(c.s&&(c.r||c.nu)){this.r=c.r;a=BOOMR.utils.hashQueryString(b.URL,!0);BOOMR.debug(this.r+" =?= "+this.r2,"rt");BOOMR.debug(c.s+" <? "+(+c.cl+15),"rt");BOOMR.debug(c.nu+" =?= "+a,"rt");if(!this.strict_referrer||c.nu&&c.nu===a&&c.s<+c.cl+15||c.s===+c.ul&&this.r===this.r2){this.t_start=c.s;+c.hd>c.s&&(this.t_fb_approx=parseInt(c.hd,10))}else this.t_start=this.t_fb_approx=void 0}this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0,ld:void 0,rl:void 0})}},getBoomerangTimings:function(){function a(a,b){var c=Math.round(a||0),d=Math.round(b||0);c=0===c?0:c-d;return c||""}var b,d,e,f,g;if(BOOMR.t_start){BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start);BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end);BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart);BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)}}try{if(window&&"performance"in window&&window.performance&&"function"==typeof window.performance.getEntriesByName){d={"rt.bmr":BOOMR.url};for(e in d)if(d.hasOwnProperty(e)&&d[e]){b=window.performance.getEntriesByName(d[e]);if(!b||0===b.length||!b[0])continue;b=b[0];f=a(b.startTime,0);g=[f,a(b.responseEnd,f),a(b.responseStart,f),a(b.requestStart,f),a(b.connectEnd,f),a(b.secureConnectionStart,f),a(b.connectStart,f),a(b.domainLookupEnd,f),a(b.domainLookupStart,f),a(b.redirectEnd,f),a(b.redirectStart,f)].join(",").replace(/,+$/,"");BOOMR.addVar(e,g);c.addedVars.push(e)}}}catch(h){BOOMR.addError(h,"rt.getBoomerangTimings")}},checkPreRender:function(){if("prerender"!==BOOMR.visibilityState())return!1;BOOMR.plugins.RT.startTimer("t_load",this.navigationStart);BOOMR.plugins.RT.endTimer("t_load");BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart);BOOMR.plugins.RT.startTimer("t_postrender");return!0},initFromNavTiming:function(){var b,c,d;if(!this.navigationStart){c=BOOMR.getPerformance();c&&c.navigation&&(this.navigationType=c.navigation.type);if(c&&c.timing)b=c.timing;else if(a.chrome&&a.chrome.csi&&a.chrome.csi().startE){b={navigationStart:a.chrome.csi().startE};d="csi"}else if(a.gtbExternal&&a.gtbExternal.startE()){b={navigationStart:a.gtbExternal.startE()};d="gtb"}if(b){BOOMR.addVar("rt.start",d||"navigation");this.navigationStart=b.navigationStart||b.fetchStart||void 0;this.fetchStart=b.fetchStart||void 0;this.responseStart=b.responseStart||void 0;navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=b.unloadEventStart||b.fetchStart||void 0)}else BOOMR.warn("This browser doesn't support the WebTiming API","rt")}},validateLoadTimestamp:function(a,b,c){var d;if(b&&b.timing&&b.timing.loadEventEnd)return b.timing.loadEventEnd;if(!("xhr"!==c||b&&BOOMR.utils.inArray(b.initiator,BOOMR.constants.BEACON_TYPE_SPAS)))return a;d=BOOMR.getPerformance();return d&&d.timing?d.timing.loadEventEnd?d.timing.loadEventEnd:a:BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||a},setPageLoadTimers:function(a,b,d){var e,f;if("xhr"!==a){c.initFromCookie();c.initFromNavTiming();if(c.checkPreRender())return!1}if("xhr"===a){if(d.timers)for(var g in d.timers)d.timers.hasOwnProperty(g)&&BOOMR.plugins.RT.setTimer(g,d.timers[g]);else if(d&&d.timing){f=d.timing.fetchStart;(void 0===f||d.timing.responseEnd>=f)&&(e=d.timing.responseEnd)}}else c.responseStart?c.responseStart>=c.navigationStart&&c.responseStart>=c.fetchStart&&(e=c.responseStart):c.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):c.t_fb_approx&&(e=c.t_fb_approx);if(e){f?BOOMR.plugins.RT.setTimer("t_resp",f,e):BOOMR.plugins.RT.endTimer("t_resp",e);"load"===a&&c.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",c.timers.t_load.end-e):b<e?BOOMR.addVar("t_page.inv",1):BOOMR.plugins.RT.setTimer("t_page",b-e)}if("load"===a&&c.timers.hasOwnProperty("t_postrender")){BOOMR.plugins.RT.endTimer("t_postrender");BOOMR.plugins.RT.endTimer("t_prerender")}return!0},setSupportingTimestamps:function(a){a&&BOOMR.addVar("rt.tstart",a);"number"==typeof c.navigationStart&&c.navigationStart!==a&&BOOMR.addVar("rt.nstart",c.navigationStart);"number"==typeof c.t_start&&c.t_start!==a&&BOOMR.addVar("rt.cstart",c.t_start);BOOMR.addVar("rt.bstart",BOOMR.t_start);BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart);BOOMR.addVar("rt.end",c.timers.t_done.end)},determineTStart:function(a,b){var d;if("xhr"===a){b&&b.name&&c.timers[b.name]?d=c.timers[b.name].start:b&&b.timing&&b.timing.requestStart&&(d=b.timing.requestStart);void 0===d&&b&&BOOMR.utils.inArray(b.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual");c.cached_xhr_start=d}else{if(c.navigationStart)d=c.navigationStart;else if(c.t_start&&2!==c.navigationType){d=c.t_start;BOOMR.addVar("rt.start","cookie")}else if(c.cached_t_start)d=c.cached_t_start;else{BOOMR.addVar("rt.start","none");d=void 0}c.cached_t_start=d}BOOMR.debug("Got start time: "+d,"rt");return d},page_ready:function(){this.onloadfired=!0},check_visibility:function(){"visible"===BOOMR.visibilityState()&&(c.visiblefired=!0)},prerenderToVisible:function(){if(c.onloadfired&&c.autorun){BOOMR.debug("Transitioned from prerender to "+BOOMR.visibilityState(),"rt");BOOMR.addVar("vis.pre","1");BOOMR.plugins.RT.done(null,"visible")}},page_unload:function(a){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt");this.unloadfired||BOOMR.plugins.RT.done(a,"unload");this.updateCookie({r:b.URL},"beforeunload"===a.type?"ul":"hd");this.unloadfired=!0},_iterable_click:function(a,b,d,e){var f;if(d){BOOMR.debug(a+" called with "+d.nodeName,"rt");for(;d&&d.nodeName.toUpperCase()!==b;)d=d.parentNode;if(d&&d.nodeName.toUpperCase()===b){BOOMR.debug("passing through","rt");f=e(d);this.updateCookie({nu:f},"cl");BOOMR.addVar("nu",BOOMR.utils.cleanupURL(f));c.addedVars.push("nu")}}},onclick:function(a){c._iterable_click("Click","A",a,function(a){return a.href})},markComplete:function(){this.onloadfired&&(c.complete=!0)},onsubmit:function(a){c._iterable_click("Submit","FORM",a,function(a){var c=a.getAttribute("action")||b.URL||"";return c.match(/\?/)?c:c+"?"})},onconfig:function(a){a.beacon_url&&(c.beacon_url=a.beacon_url);if(a.RT){a.RT.oboError&&!isNaN(a.RT.oboError)&&a.RT.oboError>c.oboError&&(c.oboError=a.RT.oboError);if(a.RT.loadTime&&!isNaN(a.RT.loadTime)&&a.RT.loadTime>c.loadTime){c.loadTime=a.RT.loadTime;isNaN(c.timers.t_done.delta)||(c.loadTime+=c.timers.t_done.delta)}}},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start");if(c.addedVars&&c.addedVars.length>0){BOOMR.removeVar(c.addedVars);c.addedVars=[]}},spaNavigation:function(){c.onloadfired=!0}};BOOMR.plugins.RT={init:function(d){BOOMR.debug("init RT","rt");a!==BOOMR.window&&(a=BOOMR.window);d&&d.CrossDomain&&d.CrossDomain.sending&&(c.crossdomain_sending=!0);if(a&&a.document){b=a.document;BOOMR.utils.pluginConfig(c,d,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]);d&&void 0!==d.autorun&&(c.autorun=d.autorun);void 0!==b&&(c.r=c.r2=BOOMR.utils.hashQueryString(b.referrer,!0));c.initFromCookie();if(c.initialized)return this;c.complete=!1;c.timers={};c.check_visibility();BOOMR.subscribe("page_ready",c.page_ready,null,c);BOOMR.subscribe("visibility_changed",c.check_visibility,null,c);BOOMR.subscribe("prerender_to_visible",c.prerenderToVisible,null,c);BOOMR.subscribe("page_ready",this.done,"load",this);BOOMR.subscribe("xhr_load",this.done,"xhr",this);BOOMR.subscribe("dom_loaded",c.domloaded,null,c);BOOMR.subscribe("page_unload",c.page_unload,null,c);BOOMR.subscribe("click",c.onclick,null,c);BOOMR.subscribe("form_submit",c.onsubmit,null,c);BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this);BOOMR.subscribe("beacon",c.clear,null,c);BOOMR.subscribe("error",c.markComplete,null,c);BOOMR.subscribe("config",c.onconfig,null,c);BOOMR.subscribe("spa_navigation",c.spaNavigation,null,c);BOOMR.subscribe("interaction",c.markComplete,null,c);BOOMR.getBeaconURL=function(){return c.beacon_url};c.initialized=!0;return this}},startTimer:function(a,b){if(a){"t_page"===a&&this.endTimer("t_resp",b);c.timers[a]={start:"number"==typeof b?b:BOOMR.now()}}return this},endTimer:function(a,b){if(a){c.timers[a]=c.timers[a]||{};void 0===c.timers[a].end&&(c.timers[a].end="number"==typeof b?b:BOOMR.now())}return this},clearTimer:function(a){a&&delete c.timers[a];return this},setTimer:function(a,b,d){a&&(c.timers[a]=void 0!==d?{start:b,end:d,delta:d-b}:{delta:b});return this},addTimersToBeacon:function(a,b){var d,e,f=[];for(d in c.timers)if(c.timers.hasOwnProperty(d)){e=c.timers[d];if("number"!=typeof e.delta){"number"!=typeof e.start&&(e.start="xhr"===b?c.cached_xhr_start:c.cached_t_start);e.delta=e.end-e.start}if(isNaN(e.delta))continue;if(c.basic_timers.hasOwnProperty(d)){BOOMR.addVar(d,e.delta);c.addedVars.push(d)}else f.push(d+"|"+e.delta)}if(f.length){BOOMR.addVar("t_other",f.join(","));c.addedVars.push("t_other")}if("beacon"===b){c.timers={};c.complete=!1}},done:function(a,b){BOOMR.debug("Called done: "+b,"rt");var d,e,f=BOOMR.now(),g=!1;c.complete=!1;e=c.validateLoadTimestamp(f,a,b);if(("load"===b||"visible"===b||"xhr"===b)&&!c.setPageLoadTimers(b,e,a))return this;("load"===b||"visible"===b||"xhr"===b&&a&&"spa_hard"===a.initiator)&&c.getBoomerangTimings();d=c.determineTStart(b,a);this.endTimer("t_done",e);a&&"xhr"===a.initiator&&this.setTimer("t_done",a.timing.requestStart,a.timing.loadEventEnd);BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","rt.tstart","rt.nstart","rt.cstart","rt.bstart","rt.end","rt.subres","http.errno","http.method","xhr.sync");c.setSupportingTimestamps(d);this.addTimersToBeacon(null,b);BOOMR.setReferrer(c.r,c.r2);"xhr"===b&&a&&a&&a.data&&(a=a.data);if("xhr"===b&&a){g=a.subresource;if(a.url){BOOMR.addVar("u",BOOMR.utils.cleanupURL(a.url.replace(/#.*/,"")));c.addedVars.push("u")}a.status&&(a.status<-1||a.status>=400)&&BOOMR.addVar("http.errno",a.status);a.method&&"GET"!==a.method&&BOOMR.addVar("http.method",a.method);a.headers&&BOOMR.addVar("http.hdr",a.headers);a.synchronous&&BOOMR.addVar("xhr.sync",1);a.initiator&&BOOMR.addVar("http.initiator",a.initiator);c.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")}if(g&&"passive"!==g){BOOMR.addVar("rt.subres",1);c.addedVars.push("rt.subres")}c.updateCookie();if("unload"===b){BOOMR.addVar("rt.quit","");if(!c.onloadfired){BOOMR.addVar("rt.abld","");c.addedVars.push("rt.abld")}c.visiblefired||BOOMR.addVar("rt.ntvu","")}c.complete=!0;BOOMR.sendBeacon(c.beacon_url);return this},is_complete:function(a){return c.complete||a&&"error"===a["http.initiator"]},updateCookie:function(){c.updateCookie()},navigationStart:function(){c.navigationStart||c.initFromNavTiming();return c.navigationStart}}}}(window);BOOMR.init({autorun:!0,beacon_send_externally:!0,RT:{enabled:!0},Continuity:{enabled:!0,sendTimeline:!1,sendLog:!1,waitAfterOnload:1e3,monitorStats:!1,monitorInteractions:!1,afterOnload:!0}});BOOMR.t_end=(new Date).getTime();
